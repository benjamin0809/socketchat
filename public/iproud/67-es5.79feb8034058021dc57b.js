(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{XRVZ:function(n,l,t){"use strict";t.r(l);var o=t("CcnG"),e=function(){return function(){}}(),i=t("pMnS"),s=t("oBZk"),u=t("ZZ/e"),r=t("Ip0R"),a=t("1bmy"),c=t("liwm"),b=t("riPR"),p=t("ZwiA"),m=t("A7o+"),d=t("mrSG"),f=t("VvKu"),g=t("VGsI"),h=t("geQG"),k=t("GAO8"),w=t("RXhJ"),v=function(n){function l(l,t,o,e,i,s,u,r){var a=n.call(this,l,t,r)||this;return a.navCtrl=l,a.eventsService=t,a.session=o,a.workflowProvider=e,a.translate=i,a.popoverCtrl=s,a.userProvider=u,a.router=r,a.page=0,a.count=10,a.isCollapse=!1,a.isDataLoading=!1,a.isDataEmpty=!1,a}return d.d(l,n),l.prototype.ngOnInit=function(){var n=this;this.init(),this.eventsService.on(f.u.SetShowMobileTask,(function(){n.getUndoneTasks()})),this.eventsService.on(f.u.RefreshTodoList,(function(){n.getUndoneTasks()}))},l.prototype.getUndoneTasks=function(l){var t=this;l||(this.isDataLoading=!0),this.isDataEmpty=!1,this.buttons=[],this.tasklist=[],this.showlist=[],this.buttons.push({appcode:"_iproud_all",modelname:"_all_models",modeldesc:this.translate.instant("WORKFLOW_UNDONETASK_ALL"),appname:this.translate.instant("WORKFLOW_UNDONETASK_ALL"),totalnum:0,isSelected:!0}),this.currentModel=this.buttons[0].modelname;var o=!!this.session.setting&&this.session.setting["showmobileTaskOnly".toUpperCase()];this.workflowProvider.getTodoTask(g.a.boolean(o)).subscribe((function(n){if(n.result){t.tasklist=g.a.boolean(o)?n.result.Tasks.filter((function(n){return n.supportMobile})):n.result.Tasks,t.buttons=t.buttons.concat(n.result.Models);for(var l=0,e=t.buttons;l<e.length;l++){var i=e[l];i.totalnum=0;for(var s=0,u=t.tasklist;s<u.length;s++)i.modelname===u[s].modelname&&i.totalnum++;i.modeldesc=i.modeldesc||i.modeldesctw}t.buttons[0].totalnum=t.tasklist.length,t.buttons=t.buttons.filter((function(n){return n.totalnum>0})),t.isDataEmpty=!(t.buttons.length>0),t.showlist=t.tasklist}else t.isDataEmpty=!0}),(function(n){}),(function(){console.log("loaded"),t.isDataLoading=!1,n.prototype.completeRefresh.call(t,l)}))},l.prototype.getTasksByModel=function(n){if(this.currentModel=n.modelname,this.showlist=[],"_iproud_all"===n.appcode)this.showlist=this.tasklist;else for(var l=0,t=this.tasklist;l<t.length;l++)(i=t[l]).modelname===n.modelname&&this.showlist.push(i);for(var o=0,e=this.buttons;o<e.length;o++){var i;(i=e[o]).isSelected=i.modelname===n.modelname}},l.prototype.goDetails=function(l){l.app_isEdit=l.flag>"0",l.app_needSign=!0,n.prototype.goDetails.call(this,l)},l.prototype.scrollWidth=function(){return n.prototype.scrollWidth.call(this,window.screen.availWidth-25)},l.prototype.doRefresh=function(n){this.getUndoneTasks(n)},l.prototype.init=function(){return d.b(this,void 0,void 0,(function(){var n=this;return d.e(this,(function(l){switch(l.label){case 0:return this.session.setting?(this.getUndoneTasks(),[3,3]):[3,1];case 1:return[4,this.userProvider.getPrivateSetting()];case 2:l.sent().subscribe((function(l){for(var t={},o=0,e=l.result;o<e.length;o++){var i=e[o];t[i.name.toUpperCase()]=i.value}n.session.setting=t,n.getUndoneTasks()}),(function(l){n.getUndoneTasks()})),l.label=3;case 3:return[2]}}))}))},l.prototype.mock=function(){for(var n=0;n<20;n++){var l="\u53ef\u80fd\u4f1a\u662f\u591a\u5c11\u4e2a\u6c49\u5b57\u5462\uff0c\u4f60\u731c\u4e00\u4e0b",t={appcode:"_iproud_all"+n,modelname:"_all_models"+n,modeldesctw:l.substr(n),appname:l.substr(n),totalnum:0,isSelected:!1};this.buttons.push(t)}},l.prototype.changeButtonsShow=function(){this.isCollapse=!this.isCollapse},l.prototype.scrollHeight=function(){var n=this.taskType.nativeElement?this.taskType.nativeElement.clientHeigh||this.taskType.nativeElement.offsetHeight||this.taskType.nativeElement.scrollHeight:44;return{height:n>200?200:n+"px",marginRight:"3rem"}},l}(h.a),y=t("ZYCi"),x=o.rb({encapsulation:0,styles:[[".back-button[_ngcontent-%COMP%]{--color:#999!important}.button-native[_ngcontent-%COMP%]{color:var(--text-primary-color)}ion-avatar[_ngcontent-%COMP%]{width:36px;height:36px;margin:8px 16px 8px 0;float:left}.list-title[_ngcontent-%COMP%]{white-space:normal;font-size:1.4rem;color:var(--text-primary-color)}.taskdesc-box[_ngcontent-%COMP%]{display:-webkit-box;display:flex;position:relative;overflow:inherit}.p[_ngcontent-%COMP%]{font-size:1.4rem;line-height:normal;text-overflow:inherit;color:#8e9093!important;margin:0 0 2px}ion-icon[_ngcontent-%COMP%]{-webkit-filter:var(--text-primary-color);filter:var(--text-primary-color)}.pid[_ngcontent-%COMP%]{font-size:1.1rem;right:0;position:absolute;z-index:2;background:var(--bg-primary-color);padding:0 5px;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.taskdate[_ngcontent-%COMP%]{font-size:1.1rem}.buttons-box[_ngcontent-%COMP%]{display:-webkit-inline-box;display:inline-flex;-webkit-animation:.5s topIn;animation:.5s topIn;padding-right:3.5rem}.task-type[_ngcontent-%COMP%]{max-height:200px;height:100px}.expand[_ngcontent-%COMP%]{-webkit-animation:1s topIn;animation:1s topIn;padding-right:3rem}.collapse[_ngcontent-%COMP%]{width:3rem;height:3rem;display:block;text-align:center;position:absolute;right:0;top:.5rem;z-index:9999}.collapse[_ngcontent-%COMP%]   .icon-ios[_ngcontent-%COMP%]{-webkit-transition:-webkit-transform .2s;transition:-webkit-transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s;font-size:3rem;color:var(--text-primary-color);background:0 0}.collapse[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.badge-ios-gray[_ngcontent-%COMP%]{background:0 0}@-webkit-keyframes icon{0%{-webkit-transform:rotate(180deg);transform:rotate(180deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes icon{0%{-webkit-transform:rotate(180deg);transform:rotate(180deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes topIn{from{-webkit-transform-origin:0 0;transform-origin:0 0;opacity:.5}to{-webkit-transform-origin:0 0;transform-origin:0 0;opacity:1}}@keyframes topIn{from{-webkit-transform-origin:0 0;transform-origin:0 0;opacity:.5}to{-webkit-transform-origin:0 0;transform-origin:0 0;opacity:1}}@-webkit-keyframes content{from{-webkit-transform:translateY(-25px);transform:translateY(-25px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes content{from{-webkit-transform:translateY(-25px);transform:translateY(-25px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}"]],data:{}});function O(n){return o.Nb(0,[(n()(),o.tb(0,0,null,null,5,"ion-button",[["class","type-button"],["size","small"]],null,[[null,"click"]],(function(n,l,t){var o=!0;return"click"===l&&(o=!1!==n.component.getTasksByModel(n.context.$implicit)&&o),o}),s.ib,s.e)),o.sb(1,49152,null,0,u.m,[o.h,o.k,o.z],{color:[0,"color"],size:[1,"size"]},null),(n()(),o.Lb(2,0,[""," "])),(n()(),o.tb(3,0,null,0,2,"ion-badge",[["class","badge-ios-gray"],["slot","end"]],null,null,null,s.hb,s.d)),o.sb(4,49152,null,0,u.l,[o.h,o.k,o.z],{color:[0,"color"]},null),(n()(),o.Lb(5,0,["",""]))],(function(n,l){n(l,1,0,l.context.$implicit.isSelected?"primary":"light","small"),n(l,4,0,l.context.$implicit.isSelected?"primary":"light")}),(function(n,l){n(l,2,0,l.context.$implicit.modeldesc),n(l,5,0,l.context.$implicit.totalnum)}))}function D(n){return o.Nb(0,[(n()(),o.tb(0,0,[["scroll",1]],null,5,"div",[["appScrollFocus",""],["scrollX","true"]],null,null,null,null,null)),o.Ib(512,null,r.x,r.y,[o.k,o.t,o.D]),o.sb(2,278528,null,0,r.m,[r.x],{ngStyle:[0,"ngStyle"]},null),(n()(),o.tb(3,0,null,null,2,"div",[["class","buttons-box"]],null,null,null,null,null)),(n()(),o.ib(16777216,null,null,1,null,O)),o.sb(5,278528,null,0,r.i,[o.O,o.L,o.s],{ngForOf:[0,"ngForOf"]},null)],(function(n,l){var t=l.component;n(l,2,0,t.scrollWidth()),n(l,5,0,t.buttons)}),null)}function _(n){return o.Nb(0,[(n()(),o.tb(0,0,null,null,5,"ion-button",[["size","small"]],null,[[null,"click"]],(function(n,l,t){var o=!0;return"click"===l&&(o=!1!==n.component.getTasksByModel(n.context.$implicit)&&o),o}),s.ib,s.e)),o.sb(1,49152,null,0,u.m,[o.h,o.k,o.z],{color:[0,"color"],size:[1,"size"]},null),(n()(),o.Lb(2,0,[""," "])),(n()(),o.tb(3,0,null,0,2,"ion-badge",[["class","badge-ios-gray"],["slot","end"]],null,null,null,s.hb,s.d)),o.sb(4,49152,null,0,u.l,[o.h,o.k,o.z],{color:[0,"color"]},null),(n()(),o.Lb(5,0,["",""]))],(function(n,l){n(l,1,0,l.context.$implicit.isSelected?"primary":"light","small"),n(l,4,0,l.context.$implicit.isSelected?"primary":"light")}),(function(n,l){n(l,2,0,l.context.$implicit.modeldesc),n(l,5,0,l.context.$implicit.totalnum)}))}function L(n){return o.Nb(0,[(n()(),o.tb(0,0,[[2,0],["taskType",1]],null,2,"div",[["class","expand"]],null,null,null,null,null)),(n()(),o.ib(16777216,null,null,1,null,_)),o.sb(2,278528,null,0,r.i,[o.O,o.L,o.s],{ngForOf:[0,"ngForOf"]},null)],(function(n,l){n(l,2,0,l.component.buttons)}),null)}function z(n){return o.Nb(0,[(n()(),o.tb(0,0,null,null,11,"ion-toolbar",[],null,null,null,s.hc,s.db)),o.sb(1,49152,null,0,u.Eb,[o.h,o.k,o.z],null,null),(n()(),o.ib(16777216,null,0,1,null,D)),o.sb(3,16384,null,0,r.j,[o.O,o.L],{ngIf:[0,"ngIf"]},null),(n()(),o.ib(16777216,null,0,1,null,L)),o.sb(5,16384,null,0,r.j,[o.O,o.L],{ngIf:[0,"ngIf"]},null),(n()(),o.tb(6,0,null,0,5,"div",[["class","collapse"]],null,[[null,"click"]],(function(n,l,t){var o=!0;return"click"===l&&(o=!1!==n.component.changeButtonsShow()&&o),o}),null,null)),(n()(),o.tb(7,0,null,null,4,"ion-icon",[["class","icon-ios"],["name","ios-arrow-dropdown"]],null,null,null,s.xb,s.t)),o.Ib(512,null,r.v,r.w,[o.s,o.t,o.k,o.D]),o.sb(9,278528,null,0,r.h,[r.v],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),o.Hb(10,{dropdown:0}),o.sb(11,49152,null,0,u.E,[o.h,o.k,o.z],{name:[0,"name"]},null)],(function(n,l){var t=l.component;n(l,3,0,t.isCollapse),n(l,5,0,!t.isCollapse);var o=n(l,10,0,!t.isCollapse);n(l,9,0,"icon-ios",o),n(l,11,0,"ios-arrow-dropdown")}),null)}function C(n){return o.Nb(0,[(n()(),o.tb(0,0,null,null,2,"nodata",[["class","nodata"]],null,null,null,a.b,a.a)),o.sb(1,114688,null,0,c.a,[b.a,p.a,o.h,m.k],{text:[0,"text"]},null),o.Gb(131072,m.j,[m.k,o.h])],(function(n,l){n(l,1,0,o.xb(1,"",o.Mb(l,1,0,o.Fb(l,2).transform("WORKFLOW_UNDONETASK_HINT")),""))}),null)}function M(n){return o.Nb(0,[(n()(),o.tb(0,0,null,null,2,"div",[["class","ion-text-center ion-padding"]],null,null,null,null,null)),(n()(),o.tb(1,0,null,null,1,"ion-spinner",[["name","lines"]],null,null,null,s.Yb,s.U)),o.sb(2,49152,null,0,u.ub,[o.h,o.k,o.z],{name:[0,"name"]},null)],(function(n,l){n(l,2,0,"lines")}),null)}function I(n){return o.Nb(0,[(n()(),o.tb(0,0,null,null,2,"ion-avatar",[["slot","start"]],null,null,null,s.fb,s.b)),o.sb(1,49152,null,0,u.h,[o.h,o.k,o.z],null,null),(n()(),o.tb(2,0,null,0,0,"img",[["src","assets/img/workflow/mobilesupport.png"]],null,null,null,null,null))],null,null)}function T(n){return o.Nb(0,[(n()(),o.tb(0,0,null,null,2,"ion-avatar",[["slot","start"]],null,null,null,s.fb,s.b)),o.sb(1,49152,null,0,u.h,[o.h,o.k,o.z],null,null),(n()(),o.tb(2,0,null,0,0,"img",[["src","assets/img/workflow/mobilenotsupport.png"]],null,null,null,null,null))],null,null)}function S(n){return o.Nb(0,[(n()(),o.tb(0,0,null,null,17,"ion-item",[["detail",""]],null,[[null,"click"]],(function(n,l,t){var o=!0;return"click"===l&&(o=!1!==n.component.goDetails(n.context.$implicit)&&o),o}),s.Fb,s.y)),o.sb(1,49152,null,0,u.J,[o.h,o.k,o.z],{detail:[0,"detail"]},null),(n()(),o.tb(2,0,null,0,15,"ion-label",[],null,null,null,s.Gb,s.C)),o.sb(3,49152,null,0,u.P,[o.h,o.k,o.z],null,null),(n()(),o.ib(16777216,null,0,1,null,I)),o.sb(5,16384,null,0,r.j,[o.O,o.L],{ngIf:[0,"ngIf"]},null),(n()(),o.ib(16777216,null,0,1,null,T)),o.sb(7,16384,null,0,r.j,[o.O,o.L],{ngIf:[0,"ngIf"]},null),(n()(),o.tb(8,0,null,0,1,"h2",[["class","list-title"]],null,null,null,null,null)),(n()(),o.Lb(9,null,[" "," "])),(n()(),o.tb(10,0,null,0,4,"p",[["class","taskdesc-box p"]],null,null,null,null,null)),(n()(),o.tb(11,0,null,null,1,"span",[["class","taskdesc"]],null,null,null,null,null)),(n()(),o.Lb(12,null,["",""])),(n()(),o.tb(13,0,null,null,1,"span",[["class","pid"]],null,null,null,null,null)),(n()(),o.Lb(14,null,["",""])),(n()(),o.tb(15,0,null,0,2,"p",[["class","p"]],null,null,null,null,null)),(n()(),o.tb(16,0,null,null,1,"span",[["class","taskdate"]],null,null,null,null,null)),(n()(),o.Lb(17,null,["","\xa0 \xa0 ",""]))],(function(n,l){n(l,1,0,""),n(l,5,0,l.context.$implicit.supportMobile),n(l,7,0,!l.context.$implicit.supportMobile)}),(function(n,l){n(l,9,0,l.context.$implicit.processname),n(l,12,0,l.context.$implicit.taskdesc),n(l,14,0,l.context.$implicit.pid),n(l,17,0,l.context.$implicit.ownername,l.context.$implicit.datecreated)}))}function P(n){return o.Nb(0,[o.Jb(671088640,1,{content:0}),o.Jb(671088640,2,{taskType:0}),(n()(),o.tb(2,0,null,null,18,"ion-header",[["no-shadow",""]],null,null,null,s.wb,s.s)),o.sb(3,49152,null,0,u.D,[o.h,o.k,o.z],null,null),(n()(),o.tb(4,0,null,0,14,"ion-toolbar",[["class","page-navbar"],["hideBackButton","true"]],null,null,null,s.hc,s.db)),o.sb(5,49152,null,0,u.Eb,[o.h,o.k,o.z],null,null),(n()(),o.tb(6,0,null,0,8,"ion-buttons",[["slot","start"]],null,null,null,s.jb,s.f)),o.sb(7,49152,null,0,u.n,[o.h,o.k,o.z],null,null),(n()(),o.tb(8,0,null,0,6,"ion-back-button",[],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==o.Fb(n,10).onClick(t)&&e),e}),s.gb,s.c)),o.sb(9,49152,null,0,u.i,[o.h,o.k,o.z],null,null),o.sb(10,16384,null,0,u.j,[[2,u.kb],u.Lb],null,null),(n()(),o.tb(11,0,null,0,1,"ion-icon",[["ios","ios-arrow-back"],["md","md-arrow-back"]],null,null,null,s.xb,s.t)),o.sb(12,49152,null,0,u.E,[o.h,o.k,o.z],{ios:[0,"ios"],md:[1,"md"]},null),(n()(),o.Lb(13,0,[" "," "])),o.Gb(131072,m.j,[m.k,o.h]),(n()(),o.tb(15,0,null,0,3,"ion-title",[],null,null,null,s.fc,s.bb)),o.sb(16,49152,null,0,u.Cb,[o.h,o.k,o.z],null,null),(n()(),o.Lb(17,0,["",""])),o.Gb(131072,m.j,[m.k,o.h]),(n()(),o.ib(16777216,null,0,1,null,z)),o.sb(20,16384,null,0,r.j,[o.O,o.L],{ngIf:[0,"ngIf"]},null),(n()(),o.tb(21,0,null,null,13,"ion-content",[["class","content-box"]],null,null,null,s.rb,s.n)),o.sb(22,49152,[[1,4]],0,u.w,[o.h,o.k,o.z],null,null),(n()(),o.tb(23,0,null,0,3,"ion-refresher",[["slot","fixed"]],null,[[null,"ionRefresh"]],(function(n,l,t){var o=!0;return"ionRefresh"===l&&(o=!1!==n.component.doRefresh(t)&&o),o}),s.Nb,s.I)),o.sb(24,49152,null,0,u.fb,[o.h,o.k,o.z],null,null),(n()(),o.tb(25,0,null,0,1,"ion-refresher-content",[["pullingIcon","arrow-dropdown"],["refreshingSpinner","circles"]],null,null,null,s.Mb,s.J)),o.sb(26,49152,null,0,u.gb,[o.h,o.k,o.z],{pullingIcon:[0,"pullingIcon"],refreshingSpinner:[1,"refreshingSpinner"]},null),(n()(),o.ib(16777216,null,0,1,null,C)),o.sb(28,16384,null,0,r.j,[o.O,o.L],{ngIf:[0,"ngIf"]},null),(n()(),o.ib(16777216,null,0,1,null,M)),o.sb(30,16384,null,0,r.j,[o.O,o.L],{ngIf:[0,"ngIf"]},null),(n()(),o.tb(31,0,null,0,3,"ion-list",[],null,null,null,s.Ib,s.D)),o.sb(32,49152,null,0,u.Q,[o.h,o.k,o.z],null,null),(n()(),o.ib(16777216,null,0,1,null,S)),o.sb(34,278528,null,0,r.i,[o.O,o.L,o.s],{ngForOf:[0,"ngForOf"]},null)],(function(n,l){var t=l.component;n(l,12,0,"ios-arrow-back","md-arrow-back"),n(l,20,0,t.buttons&&t.buttons.length>1),n(l,26,0,"arrow-dropdown","circles"),n(l,28,0,t.isDataEmpty),n(l,30,0,t.isDataLoading),n(l,34,0,t.showlist)}),(function(n,l){n(l,13,0,o.Mb(l,13,0,o.Fb(l,14).transform("HOME_TITLE"))),n(l,17,0,o.Mb(l,17,0,o.Fb(l,18).transform("WORKFLOW_UNDONETASK_TITLE")))}))}function N(n){return o.Nb(0,[(n()(),o.tb(0,0,null,null,1,"page-undonetask",[],null,null,null,P,x)),o.sb(1,114688,null,0,v,[u.Lb,b.a,p.a,w.a,m.k,u.Ob,k.a,y.m],null,null)],(function(n,l){n(l,1,0)}),null)}var E=o.pb("page-undonetask",v,N,{},{},[]),$=t("gIcY"),j=t("j1ZV");t.d(l,"UndonetaskPageModuleNgFactory",(function(){return F}));var F=o.qb(e,[],(function(n){return o.Cb([o.Db(512,o.j,o.bb,[[8,[i.a,E]],[3,o.j],o.x]),o.Db(4608,r.l,r.k,[o.u,[2,r.A]]),o.Db(4608,u.c,u.c,[o.z,o.g]),o.Db(4608,u.Kb,u.Kb,[u.c,o.j,o.q]),o.Db(4608,u.Ob,u.Ob,[u.c,o.j,o.q]),o.Db(4608,$.r,$.r,[]),o.Db(4608,$.d,$.d,[]),o.Db(4608,m.g,m.f,[]),o.Db(4608,m.c,m.e,[]),o.Db(4608,m.i,m.d,[]),o.Db(4608,m.b,m.a,[]),o.Db(4608,m.k,m.k,[m.l,m.g,m.c,m.i,m.b,m.m,m.n]),o.Db(5120,o.d,(function(n,l,t){return[u.Ub(n,l,t)]}),[u.Tb,r.c,o.z]),o.Db(1073742336,y.n,y.n,[[2,y.t],[2,y.m]]),o.Db(1073742336,m.h,m.h,[]),o.Db(1073742336,r.b,r.b,[]),o.Db(1073742336,u.Gb,u.Gb,[]),o.Db(1073742336,$.q,$.q,[]),o.Db(1073742336,$.h,$.h,[]),o.Db(1073742336,$.o,$.o,[]),o.Db(1073742336,j.a,j.a,[]),o.Db(1073742336,e,e,[]),o.Db(256,m.n,void 0,[]),o.Db(256,m.m,void 0,[]),o.Db(256,u.Tb,void 0,[]),o.Db(1024,y.k,(function(){return[[{path:"",component:v}]]}),[])])}))}}]);