{"version":3,"sources":["../../src/pages/common/tabs/tabs.module.ts","../../src/pages/common/tabs/tabs.ts"],"names":[],"mappings":"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","file":"92.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\n\r\nimport { TabsPage } from './tabs';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    TabsPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(TabsPage),\r\n    TranslateModule.forChild()\r\n  ],\r\n  exports: [\r\n    TabsPage\r\n  ]\r\n})\r\nexport class TabsPageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/common/tabs/tabs.module.ts","import { CacheProvider } from './../../../providers/cache-provider';\r\nimport { PreloadProvider } from './../../../providers/preload-provider';\r\nimport { Utility } from './../../../services/utility';\r\nimport { StorageService } from './../../../services/storage-service';\r\nimport { Component, ViewChild, ChangeDetectorRef, ElementRef } from '@angular/core';\r\nimport { TranslateService, TranslationChangeEvent } from '@ngx-translate/core';\r\nimport { IonicPage, NavController, Tabs, Events } from 'ionic-angular';\r\n\r\nimport { JPushService } from '../../../services/services';\r\nimport { Tab1Root, Tab2Root, Tab3Root, Tab4Root, Tab5Root, Tab6Root } from '../../pages';\r\n\r\nimport { MessageProvider } from '../../../providers/providers';\r\nimport { Session } from '../../../services/session';\r\nimport { STORAGE_KEY } from '../../../services/constants';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-tabs',\r\n  templateUrl: 'tabs.html'\r\n})\r\nexport class TabsPage {\r\n  @ViewChild('mainTabs')\r\n  tabRef: Tabs;\r\n\r\n  tab1Root: any = Tab1Root;\r\n  tab2Root: any = Tab2Root;\r\n  tab3Root: any = Tab3Root;\r\n  tab4Root: any = Tab4Root;\r\n  tab5Root: any = Tab5Root;\r\n  tab1Title = \" \";\r\n  tab2Title = \" \";\r\n  tab3Title = \" \";\r\n  tab4Title = \" \";\r\n  tab5Title = \" \";\r\n\r\n  // isEmployee: Boolean = false;\r\n  isShowScreenShot: boolean = false\r\n  showSocial: boolean = false;\r\n  newMessageCount: number = 0;\r\n  showTabs: boolean = true;\r\n\r\n  constructor(public navCtrl: NavController,\r\n    public translateService: TranslateService,\r\n\r\n    public messageProvider: MessageProvider,\r\n    public session: Session,\r\n    public events: Events,\r\n    public jpushService: JPushService,\r\n    public storageService: StorageService,\r\n    public cd: ChangeDetectorRef,\r\n    public element: ElementRef,\r\n    public preloadProvider: PreloadProvider,\r\n    public cacheProvider: CacheProvider) {\r\n\r\n    this._setTabText();\r\n    this.init(); \r\n    // 当收到推送消息时（此时将消息存储）\r\n    this.events.subscribe('jpush.notificationReceived', () => {\r\n      // if (this.tabRef.getSelected().index != 1) {\r\n      // this.newMessageCount += 1;\r\n      this._setTabMessageBadge();\r\n      // }\r\n    });\r\n\r\n    this.events.subscribe('beta: showScreenShotButton', (isShowScreenShot) => {\r\n      this.isShowScreenShot = isShowScreenShot;\r\n    })\r\n    this.events.subscribe('lang:changed', (event) => {\r\n      this._setTabText();\r\n    });\r\n\r\n    this.events.subscribe('to-homemain', (event) => {\r\n      this.selectTab(0)\r\n    })\r\n\r\n    this.events.subscribe('changeTabsDisplay', (isHide) => {  \r\n      this.showTabs = !isHide\r\n    })\r\n\r\n    \r\n    this.events.subscribe('user:info-changed', () => {\r\n      // this.isEmployee = this.session.isEmployee;\r\n      setTimeout(() => {\r\n        this.init()\r\n        this.cd && this.cd.detectChanges();\r\n      }, 100)\r\n    })\r\n\r\n    this.events.subscribe('message:count-changed', (count) => {\r\n      if (count > 0) {\r\n        this.newMessageCount = count;\r\n      } else {\r\n        this.newMessageCount = 0;\r\n      }\r\n      this.jpushService.setIosIconBadgeNumber(count);\r\n      this._setTabMessageBadge();\r\n      // setTimeout(()=>{ \r\n      //   if (!this.cd['destroyed'])this.cd.detectChanges();\r\n      // },500) \r\n    })\r\n\r\n    this.events.subscribe('MassFlagChange', () => {\r\n      this.init()\r\n    })\r\n  }\r\n\r\n  ionChange() {\r\n    if (this.tabRef.getSelected().index == 1) {\r\n\r\n    }\r\n  };\r\n\r\n  selectTab(index) {\r\n    this.tabRef.select(index);\r\n    this.ionChange();\r\n  }\r\n  _setTabMessageBadge() {\r\n    if (this.newMessageCount == 0) {\r\n      this.tabRef.getByIndex(1).tabBadge = \"\";\r\n    } else {\r\n      this.tabRef.getByIndex(1).tabBadge = this.newMessageCount.toString();\r\n      this.cd && this.cd.detectChanges();\r\n    }\r\n  }\r\n\r\n  _setTabText() {\r\n    this.translateService.get(['TABS_TAB1_TITLE', 'TABS_TAB2_TITLE', 'TABS_TAB3_TITLE', 'TABS_TAB4_TITLE', 'TABS_TAB5_TITLE']).subscribe(values => {\r\n      this.tab1Title = values['TABS_TAB1_TITLE'];\r\n      this.tab2Title = values['TABS_TAB2_TITLE'];\r\n      this.tab3Title = values['TABS_TAB3_TITLE'];\r\n      this.tab4Title = values['TABS_TAB4_TITLE'];\r\n      this.tab5Title = values['TABS_TAB5_TITLE'];\r\n    });\r\n  }\r\n  ngOnInit() {\r\n    this.translateService.onLangChange.subscribe((event: TranslationChangeEvent) => {\r\n      this._setTabText();\r\n    });\r\n\r\n\r\n\r\n  }\r\n\r\n  async init() { \r\n    try{\r\n      let res = await this.cacheProvider.getSocialSetting()  \r\n      this.showSocial = res.showSocial\r\n      this.session.showSocial = res.showSocial\r\n    }catch(e){ } \r\n    this.cd && this.cd.detectChanges();\r\n  }\r\n\r\n  screenShot() {\r\n    Utility.captureWebPage(this.element.nativeElement).subscribe(res => {\r\n      this.preloadProvider.previewImage([\r\n        { pictureUrl: res.result }\r\n      ], 0)\r\n    })\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/common/tabs/tabs.ts"],"sourceRoot":""}