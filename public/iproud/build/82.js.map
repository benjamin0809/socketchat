{"version":3,"sources":["../../src/pages/community/community-iframe/community-iframe.module.ts","../../src/pages/community/community-iframe/community-iframe.ts"],"names":[],"mappings":"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","file":"82.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { CommunityIframePage } from './community-iframe';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    CommunityIframePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(CommunityIframePage),\r\n  ],\r\n})\r\nexport class CommunityIframePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/community/community-iframe/community-iframe.module.ts","import { AuthProvider } from './../../../providers/auth-provider';\r\nimport { IframeOption } from './../../../models/browser';\r\nimport { StorageService } from './../../../services/storage-service';\r\n \r\nimport { APP_STYLE } from './../../../services/constants';\r\n  \r\nimport { HandleProvider } from './../../../providers/handle/handle';\r\nimport { ShareProvider, ShareMessage } from './../../../providers/share-provider';\r\nimport { WidgetProvider } from './../../../providers/widget-provider';\r\nimport { Events, Content } from 'ionic-angular';\r\nimport { Component, ViewChild, ElementRef } from '@angular/core';\r\nimport { Location } from '@angular/common';\r\nimport { IonicPage, NavController, NavParams, Platform, PopoverController, ToastController, App } from 'ionic-angular';\r\nimport { DomSanitizer } from \"@angular/platform-browser\";\r\nimport { Clipboard } from \"@ionic-native/clipboard\";\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { HttpService, Utility, Session, NativeService } from '../../../services/services';\r\nimport { IS_DEBUG, FUNDEBUG_API_KEY } from \"../../../services/constants\";\r\nimport * as fundebug from \"fundebug-javascript\";\r\nimport { CommunityImp } from '../community';\r\n\r\n\r\nfundebug.apikey = FUNDEBUG_API_KEY;\r\nfundebug.releasestage = IS_DEBUG ? 'development' : 'production';\r\n\r\nlet _that : CommunityImp ; \r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-community-iframe',\r\n  templateUrl: 'community-iframe.html',\r\n}) \r\nexport class CommunityIframePage implements CommunityImp {\r\n  @ViewChild(\"iframe\") _iframe;\r\n  @ViewChild(Content) content: Content; \r\n  @ViewChild('header') header; \r\n  browser: any = {\r\n    isLoaded: false, // 网页是否被加载\r\n    proObj: null, // 进度条对象\r\n    progress: 0, // 网页访问的进度条\r\n    secUrl: '', // 安全链接\r\n    title: '加载中',\r\n    // originUrl: 'http://www.popochiu.com/community/index.html', // 原始链接\r\n    // completeUrl: 'http://www.popochiu.com/community/index.html', // 完整链接（添加了From, AuthCode, Lang）\r\n    originUrl: 'http://www.popochiu.com/ionic/index.html', // 原始链接\r\n    completeUrl: 'http://www.popochiu.com/ionic/index.html', // 完整链接（添加了From, AuthCode, Lang）\r\n    share: null,// 是否具有分享功能（传递一个分享对象ShareModel过来）\r\n    description: '',\r\n    options: {}\r\n  };\r\n\r\n  options :IframeOption = {\r\n    title: 'dafult',\r\n    showHeader: true,\r\n    color: '',\r\n    contentScroll: true,\r\n    contentFullscreen : false,\r\n    headerTransparent: false\r\n  }\r\n  showSetting: boolean = false;\r\n  iframe_outer = {\r\n    'overflow-y': 'scroll',\r\n    '-webkit-overflow-scrolling':'touch',\r\n    'min-height': '100%' \r\n  }\r\n\r\n  iframe_inner = {\r\n    'height': '100%',\r\n    'position': 'absolute',\r\n    'overflow': 'auto',\r\n    'border': 'none',\r\n    'width': '1px',\r\n    'min-width': '100%',\r\n    '*width': '100%'\r\n  }\r\n\r\n\r\n\r\n  cssStyle = {\r\n    outer: [],\r\n    inner: [],\r\n    outerstr: '',\r\n    innerstr: ''\r\n  }\r\n  callback: any;\r\n  isShowiFrame: boolean = true; \r\n  shareConfig: any = {\r\n    isShow: false\r\n  }; // 分享控制的配置\r\n\r\n\r\n  loadcount: number = 0;//加载次数\r\n  constructor(public navCtrl: NavController,\r\n    private params: NavParams,\r\n    private sanitizer: DomSanitizer,\r\n    private popoverCtrl: PopoverController,\r\n    private platform: Platform,\r\n    private clipboard: Clipboard,\r\n    public httpService: HttpService,\r\n    public session: Session,\r\n    private toastCtrl: ToastController,\r\n    private translate: TranslateService,\r\n    private events: Events,\r\n    private nativeService: NativeService,\r\n    public location: Location,\r\n    public widgetProvider: WidgetProvider,\r\n    public element: ElementRef,\r\n    public shareProvider: ShareProvider,\r\n    public handleProvider: HandleProvider,\r\n    public storage: StorageService, \r\n    public authProvider: AuthProvider\r\n  ) { \r\n    _that = this \r\n    this.callback = this.params.get('callback');\r\n    let browserParameter = this.params.get('browser');\r\n    this.nativeService.showLoading(); \r\n\r\n\r\n    if (browserParameter) {\r\n      this.browser.title = browserParameter.title;\r\n      this.browser.originUrl = browserParameter.originUrl;\r\n      this.browser.completeUrl = browserParameter.completeUrl;\r\n      this.browser.appId = browserParameter.appId;\r\n      this.browser.options = browserParameter.options;\r\n      if (!this.browser.originUrl) { //url为空就显示description\r\n        this.browser.description = browserParameter.description;\r\n      } \r\n      if (browserParameter.share) {\r\n        this.browser.share = browserParameter.share;\r\n      }\r\n    } else { \r\n\r\n    }\r\n\r\n    this.events.subscribe('user:logined', () => {\r\n      this.reload(true);\r\n    })\r\n\r\n    this.events.subscribe('changeCommunityUrl', (CommunityUrl) => {\r\n      if(CommunityUrl){\r\n        this.browser.originUrl = CommunityUrl;\r\n        this.browser.completeUrl = CommunityUrl; \r\n      } \r\n      this.reload();\r\n    })\r\n    this.init()\r\n\r\n    for(let item of Object.keys(this.iframe_outer)){\r\n      this.cssStyle.outer.push({\r\n        key: item,\r\n        value: this.iframe_outer[item]\r\n      })\r\n    }\r\n    \r\n    for(let item of Object.keys(this.iframe_inner)){\r\n      this.cssStyle.inner.push({\r\n        key: item,\r\n        value: this.iframe_inner[item]\r\n      })\r\n    }\r\n    \r\n  }\r\n\r\n  async init(){\r\n    let CommunityUrl = await this.storage.getItem('CommunityUrl'); \r\n    if(CommunityUrl){\r\n      this.browser.originUrl = CommunityUrl;\r\n      this.browser.completeUrl = CommunityUrl; \r\n    } \r\n    this.reload(false);\r\n  }\r\n\r\n  // ionViewDidLeave() {\r\n  //   this.callback && this.callback()\r\n  //   window.removeEventListener('message', this.receviceMessage, false)\r\n  // }\r\n  ionViewDidLoad() {\r\n    if (!this.browser.proObj) {\r\n      this.browser.proObj = document.getElementById('progress');\r\n    } \r\n    window.addEventListener(\"message\", this.receviceMessage, false);\r\n  }\r\n\r\n  receviceMessage(messageEvent: MessageEvent) {\r\n    let whiteList = [/(\\w+):\\/\\/(localhost)(:\\d*)?([^# ]*)/, /(\\w+):\\/\\/(www.popochiu.com)(:\\d*)?([^# ]*)/] \r\n    let data = messageEvent.data\r\n    var origin = messageEvent.origin;\r\n\r\n    let allow = false\r\n    whiteList.forEach((reg, index) => {\r\n      let allowMessage = reg.test(origin)\r\n      console.log(\"allowMessage\",allowMessage)\r\n      if (reg.test(origin)) allow = true;\r\n    })\r\n\r\n    if(!allow )return\r\n    let postMessage = (method:string, params: any) =>{\r\n      _that.postMessage(method, params, data.params.currentUrl)\r\n    }\r\n    // _that.nativeService.showToast(JSON.stringify(data))\r\n    switch (data.method) { \r\n      case 'close':\r\n        _that.navCtrl.pop();\r\n        break; \r\n      case 'setTitle':\r\n        _that.setTitle(data.params.title);\r\n        break; \r\n      case 'hideTabs':\r\n        _that.hideTabs();\r\n        _that.content.resize()\r\n        break;\r\n      case 'displayTabs':\r\n        _that.displayTabs();\r\n        _that.content.resize()\r\n        break;\r\n      case 'setHeaderColor':\r\n        _that.setHeaderColor(data.params.bgcolor); \r\n        break;\r\n      case 'setFullScreen': \r\n        _that.setFullScreen(data.params.fullscreen) \r\n        break;\r\n      case 'shareWxTimeLine': \r\n        _that.shareWxTimeLine(data.params) \r\n        break;\r\n      case 'shareWxSession': \r\n        _that.shareWxSession(data.params) \r\n        break;\r\n      case 'getUserToken':\r\n        postMessage('getUser',{session: _that.session}) \r\n        break;\r\n      case 'getAuthCode':\r\n\r\n        postMessage('getAuthCode-callback',{session: _that.session}) \r\n        break;\r\n      case 'setContentScroll':\r\n        _that.setContentScroll(data.params.scroll)\r\n      break;\r\n        \r\n      default:\r\n        if(!data.method){\r\n\r\n        }\r\n      postMessage('getUser',{session: _that.session}) \r\n    }\r\n  }\r\n  \r\n  newItems(array){\r\n\r\n    if(!array)array = [];\r\n    array.push({\r\n      key: 'key' + array.length + 1,\r\n      value: 'value' + array.length + 1,\r\n    })\r\n  }\r\n  settingIframe(){\r\n    this.showSetting = !this.showSetting\r\n  }\r\n\r\n  saveSetting(){\r\n    this.iframe_outer = null;\r\n    this.iframe_inner = null; \r\n    let iframe_inner = {}\r\n    let iframe_outer = {}\r\n    for(let item of this.cssStyle.outer){\r\n      iframe_outer[item.key] = item.value\r\n    }\r\n\r\n    for(let item of this.cssStyle.inner){\r\n      iframe_inner[item.key] = item.value\r\n    }\r\n\r\n    (this.iframe_inner as any) = iframe_inner;\r\n    (this.iframe_outer as any) = iframe_outer\r\n\r\n    this.cssStyle.innerstr = JSON.stringify(this.iframe_inner, null ,2)\r\n    this.cssStyle.outerstr = JSON.stringify(this.iframe_outer, null ,2)\r\n\r\n    this.storage.setItem('innerstr',this.cssStyle.innerstr )\r\n    this.storage.setItem('outerstr',this.cssStyle.outerstr )\r\n  }\r\n  setTitle(text: string){\r\n    _that.options.title = text\r\n  }\r\n\r\n  setHeaderColor(bgcolor: string){  \r\n    if(!bgcolor){\r\n      bgcolor = _that.session.isDarkMode ?  APP_STYLE.DARK.BG_COLOR : APP_STYLE.DEFAULT.BG_COLOR\r\n    }\r\n    if(_that.header){\r\n      let header = _that.header.nativeElement.querySelector('.toolbar-background')  \r\n      header.style.backgroundColor = bgcolor\r\n      _that.setTitleColor(bgcolor)\r\n    } \r\n  }\r\n\r\n  setTitleColor(bgcolor: string){ \r\n    let isBgWhite = _that.session.isDarkMode\r\n    if(bgcolor){ \r\n      isBgWhite = Utility.decideTxtColor(bgcolor);\r\n    } \r\n    if(_that.header){\r\n      let title = _that.header.nativeElement.querySelector('.toolbar-title')   \r\n      title.style.color = isBgWhite ? APP_STYLE.DARK.TEXT_COLOR : APP_STYLE.DEFAULT.TEXT_COLOR\r\n    }  \r\n  }\r\n\r\n  setContentScroll(value: boolean = true){\r\n    _that.options.contentScroll = value;\r\n  }\r\n\r\n  toggleContentScroll(){\r\n    _that.options.contentScroll = !_that.options.contentScroll;\r\n  }\r\n  setFullScreen(value: boolean = true){\r\n    _that.options.showHeader = !value; \r\n    setTimeout(()=>{\r\n      _that.content.resize()\r\n    },100)\r\n  }\r\n \r\n  hideTabs() {\r\n    let elements = document.querySelectorAll(\".tabbar\");\r\n    if (elements != null) {\r\n      Object.keys(elements).map((key) => {\r\n        elements[key].style.display = 'none';\r\n      });\r\n    }\r\n    setTimeout(()=>{\r\n      _that.content.resize()\r\n    },100)\r\n  }\r\n  displayTabs() {\r\n    let elements = document.querySelectorAll(\".tabbar\");\r\n    if (elements != null) {\r\n      Object.keys(elements).map((key) => {\r\n        elements[key].style.display = 'flex';\r\n      });\r\n    }\r\n    setTimeout(()=>{\r\n      _that.content.resize()\r\n    },100)\r\n  }\r\n\r\n  postMessage(method:string, data: any, targetUrl: string){\r\n    let that = _that._iframe.nativeElement\r\n    if(!method)return;\r\n    let postdata = {\r\n      method: method \r\n    }\r\n    Object.assign(postdata, data);\r\n    that.contentWindow.postMessage(postdata,targetUrl)\r\n  }  \r\n \r\n  // 生成随机数\r\n  private random(min: number, max: number): number {\r\n    return Math.floor(Math.random() * (max - min + 1) + min);\r\n  }\r\n\r\n  // 网页访问进度\r\n  private onprogress() {\r\n    // 随机时间\r\n    let timeout = this.random(10, 30);\r\n\r\n    let timer = setTimeout(() => {\r\n      if (this.browser.isLoaded) {\r\n        this.browser.proObj.style.width = '100%';\r\n\r\n        //记载完毕后进度归零，为下一次作准备\r\n        this.browser.progress = 0,\r\n          setTimeout(() => {\r\n            this.browser.proObj.style.width = '0%';\r\n          }, 50)\r\n        clearTimeout(timer);\r\n        return;\r\n      }\r\n\r\n      // 随机进度\r\n      this.browser.progress += this.random(1, 5);\r\n\r\n      // 随机进度不能超过 90%，以免页面还没加载完毕，进度已经 100% 了\r\n      if (this.browser.progress > 90) {\r\n        this.browser.progress = 90;\r\n        if (!this.browser.originUrl) {\r\n          this.loaded();\r\n        }\r\n\r\n      }\r\n\r\n      this.browser.proObj.style.width = this.browser.progress + '%';\r\n      this.onprogress();\r\n\r\n    }, timeout);\r\n  }\r\n\r\n  // 如果iframe页面加载成功后\r\n  loaded() {\r\n    // this.nativeService.hideLoading();\r\n    if (++this.loadcount > 1) {\r\n      this.browser.isLoaded = true;\r\n      // this.nativeService.hideLoading();\r\n      // if (this.isIos()) {\r\n      //   let iframe_ios = this._iframe.nativeElement;\r\n      //   iframe_ios.style.minHeight = window.screen.availHeight - 60 + 'px'\r\n      // }\r\n    }  \r\n  }\r\n\r\n  // 显示Popver选项\r\n  presentPopover(myEvent) {\r\n    let cb = {\r\n      refresh: () => {\r\n        this.reload(true);\r\n      },\r\n      close: () => {\r\n        this.closeTheWindow();\r\n      },\r\n      copyurl: () => {\r\n        this.copyurl();\r\n      },\r\n      openInBrowser: () => {\r\n        this.openInBrowser();\r\n      },\r\n      shareWxTimeLine: null,\r\n      shareWxSession: null,\r\n    }; \r\n\r\n    let popover = this.popoverCtrl.create('BrowserPopoverPage', {\r\n      callback: cb,\r\n      isShare: this.browser.share != null,\r\n      options: this.browser.options\r\n    }, {\r\n        cssClass: 'browser-popover'\r\n      });\r\n    popover.present({\r\n      ev: myEvent\r\n    });\r\n  }\r\n\r\n \r\n  // 重新加载页面\r\n  reload(isNeedAuth?: Boolean) {\r\n    if (this.browser.completeUrl && !isNeedAuth) {\r\n      setTimeout(() => {\r\n        this.browser.progress = 0;\r\n        if (!this.browser.proObj) {\r\n          this.browser.proObj = document.getElementById('progress');\r\n        }\r\n        this.onprogress();\r\n        // update complete Url using new AuthCode\r\n        this.browser.secUrl = this.sanitizer.bypassSecurityTrustResourceUrl(this.browser.completeUrl); \r\n        this._iframe.nativeElement.src = this.browser.completeUrl; \r\n        this._iframe.nativeElement.onload = ()=>{\r\n          this.nativeService.hideLoading();\r\n          this.nativeService.showToast('onload')\r\n        }\r\n        window.onerror = () =>{\r\n          console.log('window onerror')\r\n        }\r\n        this._iframe.nativeElement.onerror = () =>{\r\n          console.log('onerror')\r\n        }\r\n      }, 10);\r\n    } else if (this.browser.originUrl) {\r\n      \r\n      this.authProvider.getAuthCode(this.browser.appId, this.browser.originUrl).subscribe((data: any) => { \r\n        if (data.errcode == 0) {\r\n          var code = data.result.code;\r\n          let completeUrl = Utility.completeUrlForBrowser(this.browser.originUrl, code, this.session, this.browser.appId);\r\n          let title = this.browser.title;\r\n\r\n          setTimeout(() => {\r\n            this.browser.progress = 0;\r\n            if (!this.browser.proObj) {\r\n              this.browser.proObj = document.getElementById('progress');\r\n            }\r\n            this.onprogress();\r\n            this.browser.title = title;\r\n            // update complete Url using new AuthCode\r\n            this.browser.secUrl = this.sanitizer.bypassSecurityTrustResourceUrl(completeUrl);\r\n          }, 10);\r\n        }\r\n      });\r\n    }\r\n  }\r\n  // 分享微信朋友圈\r\n  shareWxTimeLine(message: ShareMessage) {\r\n    let share: ShareMessage = {\r\n      title: message.title,\r\n      resource: message.resource,\r\n      description: message.description,\r\n      thumb:  message.thumb || \"www/assets/imgs/logo.png\",\r\n    }\r\n    _that.shareProvider.shareWebPageWxTimeLine(share).subscribe(() => { })\r\n  }\r\n\r\n  // 分享到微信好友\r\n  shareWxSession(message: ShareMessage) {\r\n    let share: ShareMessage = {\r\n      title: message.title,\r\n      resource: message.resource,\r\n      description: message.description,\r\n      thumb:  message.thumb || \"www/assets/imgs/logo.png\",\r\n    }\r\n    _that.shareProvider.shareWebPageWxSession(share).subscribe(() => { })\r\n  }\r\n\r\n  // 複製鏈接（作为popover的回调）\r\n  copyurl() {\r\n    let url = this.browser.originUrl || this.browser.share.url;\r\n    this.clipboard.copy(url).then((value) => {\r\n      let toast = this.toastCtrl.create({\r\n        message: this.translate.instant('BROWSER_COPIED'),\r\n        duration: 3000,\r\n        position: 'center'\r\n      });\r\n      toast.present();\r\n    }).catch((error) => {\r\n\r\n    });\r\n  }\r\n  openInBrowser() {\r\n    this.widgetProvider.openInBrowser(this.browser.appId, this.getCurrentBrowserUrl());\r\n  }\r\n\r\n  getCurrentBrowserUrl() {\r\n    let iframe = this.element.nativeElement.querySelector('iframe');\r\n    let currenturl = Utility.removeSessionInfo(this.browser.completeUrl);\r\n    try {\r\n      if (iframe) {\r\n        currenturl = iframe.contentWindow.location.href || this.browser.completeUrl\r\n      }\r\n    } catch (e) {\r\n      this.handleProvider.generate('getIframeurl failed', -1, e)\r\n    }\r\n    return currenturl;\r\n  }\r\n \r\n\r\n  closeTheWindow() {\r\n    // if (this.nativeService.isIos()) {\r\n    //   this.focusOnOther();\r\n    //   this.nativeService.closeKeyboard();\r\n    //   setTimeout(() => {\r\n    //     this.navCtrl.pop();\r\n    //   }, 10)\r\n\r\n    // } else {\r\n    //   this.isShowiFrame = false;\r\n    //   if (this.location.path().split('/').pop() == 'browser') {\r\n    //     this.location.back()\r\n    //     setTimeout(() => {\r\n    //       this.closeTheWindow();\r\n    //     }, 10)\r\n    //   } else {\r\n    //     this.navCtrl.pop();\r\n    //     return;\r\n    //   }\r\n    // }\r\n  }\r\n\r\n  // isIos() {\r\n  //   if (this.nativeService.isIos()) {\r\n  //     return true;\r\n  //   }\r\n  //   return false;\r\n  // }\r\n  \r\n  setHeaderTransparent(transparent: boolean){\r\n    \r\n  };\r\n  setContentFullscreen(fullscreen: boolean){\r\n    \r\n  };\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/community/community-iframe/community-iframe.ts"],"sourceRoot":""}