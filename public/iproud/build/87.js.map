{"version":3,"sources":["../../src/pages/community/club-detail/club-detail.module.ts","../../src/pages/community/club-detail/club-detail.ts"],"names":[],"mappings":"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","file":"87.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ClubDetailPage } from './club-detail';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ClubDetailPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ClubDetailPage),\r\n  ],\r\n})\r\nexport class ClubDetailPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/community/club-detail/club-detail.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, PopoverController, Events, Modal, ModalController } from 'ionic-angular';\r\nimport { Club } from '../../../models/club';\r\nimport { ClubProvider } from './../../../providers/club-provider';\r\nimport { BlogProvider } from './../../../providers/blog-provider';\r\nimport { Session } from '../../../services/session';\r\nimport { ShareMessage } from '../../../providers/share-provider';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-club-detail',\r\n  templateUrl: 'club-detail.html',\r\n})\r\nexport class ClubDetailPage {\r\n  currentUser: any;\r\n  isLogin: Boolean = false;\r\n  isEmployee: Boolean = false;\r\n  ItemArray: string[] = ['简介', '讨论', '问答'];\r\n  postTypes = [{ code: 'moment', name: '动态' }, { code: 'essence', name: '精华' }];\r\n  postType: 'moment';\r\n  communitySegment: string = this.ItemArray[0];\r\n  club: Club;\r\n  modal: Modal\r\n  showModal: Boolean = false;\r\n  shareMessage: ShareMessage\r\n\r\n  constructor(public navCtrl: NavController,\r\n    public popoverCtrl: PopoverController,\r\n    public navParams: NavParams,\r\n    public clubProvider: ClubProvider,\r\n    public blogProvider: BlogProvider,\r\n    public modalCtrl: ModalController,\r\n    public session: Session,\r\n    public events: Events) {\r\n    this.isEmployee = this.session.isEmployee;\r\n    if (this.session.user != null) {\r\n      this.currentUser = this.session.user;\r\n      this.isLogin = true;\r\n    }\r\n    if (this.currentUser && this.currentUser.employeeInfo) {\r\n      this.currentUser.pictureUrl = this.currentUser.pictureUrl || \"assets/img/avatar-round.png\";\r\n    }\r\n    this.club = this.navParams.data;\r\n    this.club.talkGroup = this.blogProvider.allBlogs;\r\n    this.events.subscribe(\"segment:change\", (data) => {\r\n      this.communitySegment = data;\r\n    })\r\n    this.events.subscribe('clubTalk:add', (data) => {\r\n      console.log(data)\r\n      this.club.talkGroup.push(data);\r\n      this.club.talkGroup.sort((a, b) => {\r\n        return new Date(b.publishTime).getTime() - new Date(a.publishTime).getTime();\r\n      });\r\n\r\n    })\r\n\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n  }\r\n  isCurrentUser(item) {\r\n    return this.blogProvider.isCurrentUser(this.currentUser, item);\r\n  }\r\n  openGroup(club) {\r\n    this.navCtrl.push('MemberPage', club);\r\n  }\r\n  openPopoverPage(club) {\r\n    let popover = this.popoverCtrl.create('ClubPopoverPage', club);\r\n    popover.present();\r\n  }\r\n\r\n  isClubMember() {\r\n    //return this.clubProvider.isClubMember(this.club, this.currentUser)\r\n  }\r\n  joinClub() {\r\n    let member = {\r\n      userId: this.currentUser.userId,\r\n      userName: this.currentUser.userName,\r\n      nickName: this.currentUser.nickName,\r\n      hasPassword: this.currentUser.hasPassword,\r\n      isEmployee: this.currentUser.isEmployee,\r\n      pictureUrl: this.currentUser.pictureUrl,\r\n      //fansCount:this.currentUser.fansCount\r\n    }\r\n    //this.clubProvider.joinClub(this.club, member)\r\n    this.club.memberGroup.push(member);\r\n    ++this.club.memberCount;\r\n    this.events.publish(\"userClubGroub:change\");\r\n  }\r\n  quitClub() {\r\n    //this.clubProvider.quitClub(this.club, this.currentUser)\r\n    for (let member of this.club.memberGroup) {\r\n      if (member.userId == this.currentUser.userId) {\r\n        this.club.memberGroup.pop(member);\r\n        --this.club.memberCount;\r\n      }\r\n    }\r\n    this.events.publish(\"userClubGroub:change\");\r\n\r\n  }\r\n  addTalk(club) {\r\n    this.navCtrl.push(\"ClubTalkAddPage\", club)\r\n  }\r\n  isConcern(item) {\r\n    return this.blogProvider.isConcernSomeone(this.currentUser, item.author);\r\n  }\r\n  doConcern(item) {\r\n    this.blogProvider.concernSomeone(this.currentUser, item.author);\r\n  }\r\n  quitConcern(item) {\r\n    this.blogProvider.quitConcernSomeone(this.currentUser, item.author);\r\n  }\r\n  isZan(item) {\r\n    return this.blogProvider.isZanBlog(this.currentUser, item);\r\n  }\r\n  doZan(item) {\r\n    if (this.blogProvider.isZanBlog(this.currentUser, item)) {\r\n      this.blogProvider.quitZanBlog(this.currentUser, item);\r\n      --item.zanCount;\r\n    }\r\n    else {\r\n      this.blogProvider.zanBlog(this.currentUser, item);\r\n      ++item.zanCount;\r\n    }\r\n  };\r\n  newBlog() {\r\n    this.navCtrl.push('BlogAddPage');\r\n  }\r\n\r\n  openPersonMain(item) {\r\n    this.navCtrl.push('PersonMainPage', item.author);\r\n  }\r\n  openBlogDetail(item) {\r\n    this.navCtrl.push('BlogDetailPage', item);\r\n    ++item.readCount;\r\n  }\r\n\r\n  shareClub() {\r\n    if (this.modal && this.showModal) {\r\n      this.modal.dismiss();\r\n    } else {\r\n      this.shareMessage = {\r\n        title: this.club.name,\r\n        description: this.club.description, //描述\r\n        thumb: this.club.pictureUrl, //缩略图\r\n        resource: \"\",\r\n      }\r\n      this.modal = this.modalCtrl.create('SharePage', {\r\n        navigationDockTargetMapIds: [1, 2], shareMessage: this.shareMessage\r\n      }, {\r\n          showBackdrop: true,\r\n          enableBackdropDismiss: true,\r\n          enterAnimation: 'modal-from-bottom-enter',\r\n          leaveAnimation: 'modal-from-bottom-leave'\r\n        });\r\n      this.modal.onDidDismiss(data => {\r\n        this.showModal = false;\r\n      });\r\n      this.modal.present().then(data => {\r\n        this.showModal = true;\r\n      });\r\n    }\r\n  }\r\n\r\n  openPersonClubMain(item) {\r\n    this.navCtrl.push('PersonClubMainPage', item.author);\r\n  }\r\n\r\n\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/community/club-detail/club-detail.ts"],"sourceRoot":""}