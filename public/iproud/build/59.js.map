{"version":3,"sources":["../../src/pages/my/change-password/change-password.module.ts","../../src/pages/my/change-password/change-password.ts"],"names":[],"mappings":"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","file":"59.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\n\r\nimport { ChangePasswordPage } from './change-password';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ChangePasswordPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ChangePasswordPage),\r\n    TranslateModule.forChild()\r\n  ],\r\n  exports: [\r\n    ChangePasswordPage\r\n  ]\r\n})\r\nexport class ChangePasswordPageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/my/change-password/change-password.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, ModalController, NavController, ViewController,Events } from 'ionic-angular';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { Session, NativeService } from '../../../services/services';\r\nimport { UserProvider } from '../../../providers/providers';\r\n\r\n@IonicPage()\r\n@Component({\r\n    selector: 'page-change-password',\r\n    templateUrl: 'change-password.html'\r\n})\r\nexport class ChangePasswordPage {\r\n    currentUser: any;\r\n    isReadyToSave: boolean;\r\n    isConfirmPass: boolean;\r\n    isCorrect:boolean;\r\n    form: FormGroup;\r\n    passwordStrong: boolean;\r\n    word: string;\r\n    tipsId:string;\r\n    aStr:any;\r\n    tipsIdes:string;\r\n    wordes:string;\r\n    textColr:any;\r\n    reminder:any;\r\n\r\n    constructor(public navCtrl: NavController,\r\n        public viewCtrl: ViewController,\r\n        public session: Session,\r\n        public formBuilder: FormBuilder,\r\n        private userProvider: UserProvider,\r\n        private nativeService: NativeService,\r\n        private events:Events,\r\n        private translateService: TranslateService,\r\n        public modalCtrl: ModalController) \r\n    {\r\n        this.word = ''    \r\n        this.tipsId = 'tips';\r\n        this.tipsIdes = 'tips'  \r\n        this.isConfirmPass = false;\r\n        this.isCorrect = false;\r\n        this.textColr = \"defoult\";\r\n        this.reminder = this.translateService.instant('SET_PASSWORD_RULE');\r\n        this.aStr = [\r\n            this.translateService.instant('SET_PASSWORD_COEFFICIENT1'),\r\n            this.translateService.instant('SET_PASSWORD_COEFFICIENT2'),\r\n            '','',''\r\n            // this.translateService.instant('SET_PASSWORD_COEFFICIENT3'),\r\n            // this.translateService.instant('SET_PASSWORD_COEFFICIENT4'),\r\n            // this.translateService.instant('SET_PASSWORD_COEFFICIENT5') \r\n        ]\r\n        \r\n        if (this.session.user != null) {\r\n            this.currentUser = this.session.user;\r\n        }\r\n        this.form = formBuilder.group({\r\n            oldPassword: ['', Validators.required],\r\n            newPassword: ['', Validators.required],\r\n            confirmPassword: ['', Validators.required]\r\n        });\r\n\r\n        this.isReadyToSave = false;\r\n        //Watch the form for changes, and\r\n        setTimeout(() => {\r\n            this.form.valueChanges.subscribe((v) => {\r\n                if( this.form.valid ){\r\n                    this.veryfy();\r\n                } \r\n        })},500);\r\n    }\r\n\r\n    \r\n    //校验密码复杂系数\r\n    ionViewDidLoad(clack:any) {\r\n        \r\n        if (this.form.value.newPassword.length<1)   return;\r\n        //this.form.value.newPassword\r\n        let num = this.checkStrong(this.form.value.newPassword);\r\n        \r\n        if(this.form.value.newPassword.length>=8){\r\n            switch(num){\r\n                case 0 :\r\n                    this.word = this.aStr[0];    \r\n                    this.tipsId = 'tips';\r\n                    break;\r\n                case 1:\r\n                    this.word = this.aStr[1];    \r\n                    this.tipsId = 'tips0';\r\n                    break;\r\n                case 2:\r\n                    this.word = this.aStr[2];    \r\n                    this.tipsId = 'tips1';\r\n                    break;\r\n                case 3:\r\n                    this.word = this.aStr[2];    \r\n                    this.tipsId = 'tips2';\r\n                    break;\r\n                case 4:\r\n                    this.word = this.aStr[2];    \r\n                    this.tipsId = 'tips3';\r\n                    break;\r\n            } \r\n            if(num>=2){\r\n                this.tipsIdes = 'tips0';\r\n                this.isConfirmPass = true;\r\n                this.textColr = \"defoult\";\r\n            }else{\r\n                this.textColr = \"status\";\r\n            }\r\n        }else{\r\n            if(num>=2){\r\n                this.textColr = \"place\";\r\n            }else{\r\n                this.textColr = \"invalid\";\r\n            }\r\n            this.isConfirmPass = false;\r\n            this.word = \"\";    \r\n            this.tipsId = 'tips';\r\n            this.tipsIdes = 'tips';\r\n            this.wordes = \"\";\r\n        }\r\n        this.isCorrect = false;\r\n        this.veryfy();\r\n        \r\n    }\r\n    checkStrong(val:string){\r\n        let modes = 0;\r\n        if(/\\d/.test(val)) modes++;//数字\r\n        if(/[a-z]/.test(val))modes++;//小写\r\n        if(/[A-Z]/.test(val))modes++;//大写\r\n        if(/\\W/.test(val))modes++//特殊字符\r\n        return modes\r\n    }\r\n    //校验密码是否一致\r\n    veryfy(){ \r\n        if(this.form.value.confirmPassword == this.form.value.newPassword){\r\n            this.wordes = this.word;\r\n            this.tipsIdes = this.tipsId;\r\n            this.isCorrect = true;\r\n            if(this.form.value.oldPassword.length > 0 ){\r\n                this.isReadyToSave = true;\r\n            }else{\r\n                this.isReadyToSave = false;\r\n            }\r\n        }else{\r\n            this.tipsIdes = 'tips0';\r\n            this.isCorrect = false;\r\n            this.isReadyToSave = false;\r\n        }\r\n        \r\n    }\r\n\r\n    \r\n    submit() {\r\n\r\n        if (!this.form.valid) { return; }\r\n        if(this.form.value.confirmPassword != this.form.value.newPassword){\r\n            this.nativeService.alert(this.translateService.instant(\"CHANGE_PASSWORD_CONFIRM_INVLID\"));\r\n            return;\r\n        }\r\n        this.userProvider.changePassword({\r\n            oldPassword: this.form.value.oldPassword,\r\n            newPassword: this.form.value.newPassword\r\n            \r\n        }).subscribe((data: any) => {\r\n            this.translateService.get(['CHANGE_PASSWORD_SUCCESS']).subscribe(values => {\r\n                this.nativeService.showToast(values.CHANGE_PASSWORD_SUCCESS);\r\n            });\r\n            \r\n            this.userProvider.getUserInfo().subscribe((data: any) => {\r\n                this.events.publish('user:info-changed', Date.now());\r\n                this.viewCtrl.dismiss();\r\n            })\r\n        });\r\n    }\r\n\r\n    \r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/my/change-password/change-password.ts"],"sourceRoot":""}