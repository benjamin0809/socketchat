{"version":3,"sources":["../../src/pages/common/pdf-viewer/pdf-viewer.module.ts","../../src/pages/common/pdf-viewer/pdf-viewer.ts"],"names":[],"mappings":"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","file":"95.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { PdfViewerPage } from './pdf-viewer';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PdfViewerPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(PdfViewerPage),\r\n  ],\r\n})\r\nexport class PdfViewerPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/common/pdf-viewer/pdf-viewer.module.ts","import { WorkflowProvider } from \"./../../../providers/workflow-provider\";\r\nimport { Component, ElementRef } from \"@angular/core\";\r\nimport { IonicPage, NavController, NavParams } from \"ionic-angular\";\r\n\r\n/**\r\n * Generated class for the PdfViewerPage page.\r\n * 1. 若参数中含有 pid ，则调用 workflow api GetProcessPDF，获取 pdf 字符在渲染页面\r\n * 2. 若不是第一种情况，判断参数中是否含有 base64str，若有直接渲染页面\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: \"page-pdf-viewer\",\r\n  templateUrl: \"pdf-viewer.html\"\r\n})\r\nexport class PdfViewerPage {\r\n  pdfDoc = null;\r\n  scale: number = 1; // 缩放倍数\r\n  currentWidth: number = 0; // canvas宽度\r\n  saturation: number = 100;\r\n  title: string = \"\"; // PDF标题\r\n  loading: boolean = false; // 是否加载中\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    public wfprovider: WorkflowProvider,\r\n    public element: ElementRef,\r\n    public params: NavParams\r\n  ) {}\r\n\r\n  initPDFJSConfig() {\r\n    PDFJS.cMapUrl = \"cmaps/\";\r\n    PDFJS.cMapPacked = true;\r\n  }\r\n  ionViewDidLoad() {\r\n    this.title = this.params.data.title || 'PDF'; \r\n    this.initPDFJSConfig();\r\n    if (this.params.data.pid) {\r\n      this.loading = true;\r\n      this.wfprovider\r\n      .GetProcessPDF(this.params.data.pid)\r\n      .subscribe(\r\n        res => {\r\n          let data = res.result.base64Str; \r\n          this.getDocAndRenderPage(data)\r\n        },\r\n        err => {},\r\n        () => {\r\n          this.loading = false;\r\n        }\r\n      );\r\n    } else if(this.params.data.base64str){\r\n      this.getDocAndRenderPage(this.params.data.base64str)\r\n    } else {\r\n      throw new Error('undefined params')\r\n    }\r\n  }\r\n\r\n  rangeChange(){\r\n    if(this.loading){\r\n      return \r\n    }\r\n    this.scale = this.saturation * 0.01\r\n\r\n    this.scaleContainer(  this.scale )\r\n  }\r\n  /**\r\n   * \r\n   * @param data \r\n   */\r\n  getDocAndRenderPage(data: any) {\r\n    data = data && data.replace(\"data:application/pdf;base64,\", \"\");\r\n    const array = this.converData(data);\r\n    PDFJS.getDocument(array).then(pdf => {\r\n      this.pdfDoc = pdf;\r\n      for (var i = 1; i <= this.pdfDoc.numPages; i++) {\r\n        this.renderPage(i);\r\n      }\r\n      var box: any = document.querySelector(\"#canvas-container\");\r\n      var boxGesture: any = this.setGesture(box); //得到一个对象\r\n      boxGesture.gesturestart = function() {\r\n        //双指开始\r\n              };\r\n      boxGesture.gesturemove = e => {\r\n        //双指移动\r\n        this.scale = e.scale;\r\n        // box.style.transform = `scale(${e.scale})`  ;//改变目标元素的大小和角度\r\n        // box.style.width = this.getTransformString(e.scale);\r\n      };\r\n      boxGesture.gestureend = () => {\r\n        //双指结束\r\n        this.currentWidth = box.clientWidth;\r\n      };\r\n    });\r\n  }\r\n\r\n  getTransformString(scale: number) {\r\n    let width = this.currentWidth || window.screen.width;\r\n    width = scale * width;\r\n    width = Math.min(3 * window.screen.width, width);\r\n    width = Math.max(window.screen.width, width);\r\n    return `${width}px`;\r\n  }\r\n\r\n  /**\r\n   * 创建canvas页面\r\n   * @param num 页码\r\n   */\r\n  createPage(num: string) {\r\n    let canvas = document.createElement(\"canvas\");\r\n    let div = document.createElement(\"div\");\r\n    div.textContent = num;\r\n    div.setAttribute(\"class\", \"page\");\r\n    var canvasContainer = this.element.nativeElement.querySelector(\r\n      \"#canvas-container\"\r\n    );\r\n    canvasContainer.appendChild(canvas);\r\n    canvasContainer.appendChild(div);\r\n    return canvas;\r\n  }\r\n\r\n  /**\r\n   * 将 Base64 转成 Uint8Array\r\n   * @param data base64\r\n   */\r\n  converData(data) {\r\n    data = data.replace(/[\\n\\r]/g, \"\");\r\n    var raw = window.atob(data);\r\n    var rawLength = raw.length;\r\n    var array = new Uint8Array(new ArrayBuffer(rawLength));\r\n    for (var i = 0; i < rawLength; i++) {\r\n      array[i] = raw.charCodeAt(i);\r\n    }\r\n    return array;\r\n  }\r\n\r\n  /**\r\n   * 渲染 PDF 页面（单页）\r\n   * @param num\r\n   */\r\n  renderPage(num) {\r\n    this.pdfDoc.getPage(num).then(page => {\r\n      var viewport = page.getViewport(2.0);\r\n      var canvas = this.createPage(num);\r\n      var ctx = canvas.getContext(\"2d\");\r\n\r\n      canvas.height = viewport.height;\r\n      canvas.width = viewport.width;\r\n\r\n      page.render({\r\n        canvasContext: ctx,\r\n        viewport: viewport\r\n      });\r\n    });\r\n  }\r\n\r\n  ionViewWillLeave() {\r\n    // this.restoreScale()\r\n  }\r\n\r\n  clickScale() {\r\n    var box: any = document.querySelector(\"#canvas-container\");\r\n    let str = `scale(1.5) `;\r\n    box.style.width = `${1.5 * window.screen.width}px`;\r\n  }\r\n\r\n  scaleContainer(scale: number) {\r\n    let box: any = document.querySelector(\"#canvas-container\"); \r\n    box.style.width = this.getTransformString(scale);\r\n  }\r\n  increase() {\r\n    if(this.loading){\r\n      return \r\n    }\r\n\r\n    if(this.saturation > 0) {\r\n      this.saturation +=  40\r\n      this.saturation = Math.min(300, this.saturation)\r\n    }\r\n    this.scale = this.saturation * 0.01\r\n    this.scaleContainer(this.scale)\r\n  }\r\n\r\n  decrease() {\r\n    if(this.loading){\r\n      return \r\n    }\r\n    if(this.saturation > 0) {\r\n      this.saturation -=  40\r\n      this.saturation = Math.max(100, this.saturation)\r\n    }\r\n    this.scale = this.saturation * 0.01\r\n    this.scaleContainer(this.scale)\r\n  }\r\n  setGesture(el) {\r\n    var obj = {}; //定义一个对象\r\n    var istouch = false;\r\n    var start = [];\r\n    el.addEventListener(\r\n      \"touchstart\",\r\n      e => {\r\n        if (e.touches.length >= 2) {\r\n          //判断是否有两个点在屏幕上\r\n          istouch = true;\r\n          start = e.touches; //得到第一组两个点\r\n          obj[\"gesturestart\"] && obj[\"gesturestart\"].call(el); //执行gesturestart方法\r\n        }\r\n      },\r\n      false\r\n    );\r\n    document.addEventListener(\r\n      \"touchmove\",\r\n      e => {\r\n        e.preventDefault();\r\n        if (e.touches.length >= 2 && istouch) {\r\n          var now = e.touches; //得到第二组两个点\r\n          var scale =\r\n            this.getDistance(now[0], now[1]) /\r\n            this.getDistance(start[0], start[1]); //得到缩放比例，getDistance是勾股定理的一个方法\r\n          var rotation =\r\n            this.getAngle(now[0], now[1]) - this.getAngle(start[0], start[1]); //得到旋转角度，getAngle是得到夹角的一个方法\r\n          (e as any).scale = scale.toFixed(2);\r\n          (e as any).rotation = rotation.toFixed(2);\r\n          obj[\"gesturemove\"] && obj[\"gesturemove\"].call(el, e); //执行gesturemove方法\r\n        }\r\n      },\r\n      false\r\n    );\r\n    document.addEventListener(\r\n      \"touchend\",\r\n      function(e) {\r\n        if (istouch) {\r\n          istouch = false;\r\n          obj[\"gestureend\"] && obj[\"gestureend\"].call(el); //执行gestureend方法\r\n        }\r\n      },\r\n      false\r\n    );\r\n    return obj;\r\n  }\r\n  getDistance(p1, p2) {\r\n    var x = p2.pageX - p1.pageX,\r\n      y = p2.pageY - p1.pageY;\r\n    return Math.sqrt(x * x + y * y);\r\n  }\r\n  getAngle(p1, p2) {\r\n    var x = p1.pageX - p2.pageX,\r\n      y = p1.pageY - p2.pageY;\r\n    return (Math.atan2(y, x) * 180) / Math.PI;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/common/pdf-viewer/pdf-viewer.ts"],"sourceRoot":""}