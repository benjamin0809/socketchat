{"version":3,"sources":["../../src/pages/beta/login-by-wechat/login-by-wechat.module.ts","../../src/pages/beta/login-by-wechat/login-by-wechat.ts"],"names":[],"mappings":"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","file":"109.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { LoginByWechatPage } from './login-by-wechat';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    LoginByWechatPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(LoginByWechatPage),\r\n  ],\r\n})\r\nexport class LoginByWechatPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/beta/login-by-wechat/login-by-wechat.module.ts","import { Clipboard } from '@ionic-native/clipboard';\r\nimport { UserProvider } from './../../../providers/user-provider';\r\nimport { NativeService } from './../../../services/native-service';\r\nimport { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, LoadingController } from 'ionic-angular';\r\n\r\n/**\r\n * Generated class for the LoginByWechatPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-login-by-wechat',\r\n  templateUrl: 'login-by-wechat.html',\r\n})\r\nexport class LoginByWechatPage {\r\n\r\n  result: string = ''\r\n\r\n  code: string = ''\r\n  constructor(public navCtrl: NavController, \r\n    public navParams: NavParams,\r\n    private nativeService: NativeService,\r\n    private loadingCtrl: LoadingController,\r\n    private userProvider: UserProvider,\r\n    private clipboard: Clipboard) {\r\n  }\r\n\r\n  ionViewDidLoad() { \r\n  }\r\n\r\n  getCode(){\r\n    this.nativeService.isInstallWeChat(); \r\n    let loading = this.loadingCtrl.create({\r\n      content: \"跳转微信登录中...\",//loading框显示的内容\r\n      dismissOnPageChange: true, // 是否在切换页面之后关闭loading框\r\n      showBackdrop: true  //是否显示遮罩层\r\n    });\r\n    loading.present();\r\n    try {\r\n      let scope = \"snsapi_userinfo\",\r\n        state = \"com.fihmb.iproud\";\r\n      // 1. 获取code\r\n      Wechat.auth(scope, state, (response) => { \r\n        this.code = response.code\r\n      }, (reason) => {\r\n        alert(\"Failed: \" + reason);\r\n      });\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      loading.dismiss();\r\n    }\r\n  }\r\n  weChatAuth() {\r\n\r\n    this.nativeService.isInstallWeChat(); \r\n    let loading = this.loadingCtrl.create({\r\n      content: \"跳转微信登录中...\",//loading框显示的内容\r\n      dismissOnPageChange: true, // 是否在切换页面之后关闭loading框\r\n      showBackdrop: true  //是否显示遮罩层\r\n    });\r\n    loading.present();\r\n    try {\r\n      let scope = \"snsapi_userinfo\",\r\n        state = \"com.fihmb.iproud\";\r\n      // 1. 获取code\r\n      Wechat.auth(scope, state, (response) => {\r\n        this.getWechatUserInfo(response) \r\n      }, (reason) => {\r\n        alert(\"Failed: \" + reason);\r\n      });\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      loading.dismiss();\r\n    }\r\n\r\n  }\r\n\r\n  copyCode(){\r\n    this.clipboard.copy(this.code ).then(res=>{\r\n      this.nativeService.showToast(\"复制Code成功，Code：\" + this.code)\r\n    })\r\n  }\r\n  getWechatUserInfo(response){\r\n    this.userProvider.getWechatUserInfo(response.code).subscribe(res=>{\r\n      this.result = JSON.stringify(res, null, 2)\r\n    },err=>{\r\n      this.result = JSON.stringify(err, null, 2)\r\n    })\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/beta/login-by-wechat/login-by-wechat.ts"],"sourceRoot":""}