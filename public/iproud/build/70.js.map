{"version":3,"sources":["../../src/pages/contact/contact-group-manage/contact-group-manage.module.ts","../../src/pages/contact/contact-group-manage/contact-group-manage.ts"],"names":[],"mappings":"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","file":"70.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ContactGroupManagePage } from './contact-group-manage';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ContactGroupManagePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ContactGroupManagePage),\r\n    TranslateModule.forChild(),\r\n  ],\r\n})\r\nexport class ContactGroupManagePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/contact/contact-group-manage/contact-group-manage.module.ts","import { TranslateService } from '@ngx-translate/core';\r\nimport { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams,PopoverController,AlertController ,Events} from 'ionic-angular';\r\nimport { ContactProvider } from './../../../providers/contact-provider'; \r\nimport { SqliteProvider } from './../../../providers/sqlite-provider';\r\nimport { THIS_EXPR } from '@angular/compiler/src/output/output_ast';\r\n\r\n\r\n/**\r\n * Generated class for the ContactGroupManagePage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-contact-group-manage',\r\n  templateUrl: 'contact-group-manage.html',\r\n})\r\nexport class ContactGroupManagePage {\r\n  friendGroups:any;\r\n\r\n  constructor(public navCtrl: NavController,\r\n    public contactProvider: ContactProvider,\r\n    public popoverCtrl:PopoverController,\r\n    public translateService:TranslateService,\r\n    public alertCtrl: AlertController,\r\n    public sqliteProvider: SqliteProvider,\r\n    public events:Events,\r\n     public navParams: NavParams) {\r\n      \r\n      this.getFriendTagListFromTable(); \r\n         \r\n     }\r\n\r\n  ionViewDidLoad() {\r\n  } \r\n\r\n  getFriendTagListFromApi(){\r\n    this.contactProvider.FriendTagList().subscribe(res=>{ \r\n    })\r\n  }\r\n  getFriendTagListFromTable(){\r\n    this.sqliteProvider.queryFriendsGroups().subscribe((data)=>{\r\n      this.friendGroups=[];\r\n      //console.log(data)\r\n      for(let tag of data){\r\n        if(tag.GroupId != -1 && tag.GroupId != 0){\r\n          let group={id:tag.GroupId,name:tag.GroupName}\r\n          this.friendGroups.push(group)       \r\n        }\r\n      }\r\n    });\r\n\r\n  }\r\n  \r\n  createFriendGroupTag(){\r\n    const prompt = this.alertCtrl.create({\r\n      title: this.translateService.instant('CONTACT_GROUP_ADD_ALERT'),\r\n      message: this.translateService.instant('CONTACT_GROUP_ADD_MESSAGE'),\r\n      inputs: [\r\n        {\r\n          name: 'name',\r\n          placeholder: this.translateService.instant('CONTACT_GROUP_ADD_PLACEHOLDER'),\r\n        },\r\n      ],\r\n      buttons: [\r\n        {\r\n          text: this.translateService.instant('MESSAGE_DELETE_CANCEL'),\r\n          role:'cancel' \r\n        },\r\n        {\r\n          text: this.translateService.instant('MESSAGE_DELETE_CONFIRM'),\r\n          handler: data => {\r\n            this.contactProvider.CreateFriendTag(data.name,[]).subscribe(\r\n              (result)=>{                \r\n                let group ={GroupId:result.result.friendTagId,GroupName:data.name}; \r\n                this.sqliteProvider.insertFriendsGroup(group).subscribe(res=>{\r\n                  this.getFriendTagListFromTable();\r\n                  this.events.publish('contact: refresh-friendsFromSqlite')\r\n                }) \r\n              }\r\n            );                    \r\n          }\r\n        }\r\n      ]\r\n    });\r\n    prompt.present();\r\n  }\r\n\r\n  removeFriendGroupTag(group){\r\n    const prompt = this.alertCtrl.create({\r\n      title: this.translateService.instant('CONTACT_GROUP_DELETE_ALERT'),\r\n      message: this.translateService.instant('CONTACT_GROUP_DELETE_MESSAGE'),\r\n      buttons: [\r\n        {\r\n          text: this.translateService.instant('MESSAGE_DELETE_CANCEL'),\r\n           role:'cancel' \r\n        },\r\n        {\r\n          text: this.translateService.instant('MESSAGE_DELETE_CONFIRM'),\r\n          handler: () => {\r\n            this.contactProvider.DeleteFriendTag(group.id).subscribe(\r\n              (result)=>{\r\n                if(result.errcode==0){\r\n                  this.sqliteProvider.deleteGroup(group.id).subscribe(()=>{\r\n                    this.getFriendTagListFromTable();});\r\n                    //更新contact頁面的分組名\r\n                    this.contactProvider.MyFriends().subscribe();\r\n                } \r\n              }\r\n            );     \r\n          }\r\n        }\r\n      ]\r\n    });\r\n    prompt.present();\r\n  }\r\n  updateFriendGroupTag(group){\r\n    const prompt = this.alertCtrl.create({\r\n      title:this.translateService.instant('CONTACT_GROUP_EDIT_ALERT'),\r\n      message: this.translateService.instant('CONTACT_GROUP_EDIT_MESSAGE'),\r\n      inputs: [\r\n        {\r\n          name: 'name',\r\n          placeholder: group.name\r\n        },\r\n      ],\r\n      buttons: [\r\n        {\r\n          text: this.translateService.instant('MESSAGE_DELETE_CANCEL'),\r\n          handler: data => {\r\n            console.log('Cancel clicked');\r\n          }\r\n        },\r\n        {\r\n          text: this.translateService.instant('MESSAGE_DELETE_CONFIRM'),\r\n          handler: data => {\r\n           this.contactProvider.UpdateFriendTag(group.id,data.name,[],[]).subscribe((result)=>{\r\n            if(result.errcode==0){\r\n              let tag ={GroupId:group.id,GroupName:data.name};\r\n              this.sqliteProvider.updateGroup(tag).subscribe(()=>{\r\n                this.getFriendTagListFromTable();\r\n               //更新contact頁面的分組名\r\n               this.events.publish('contact: refresh-friendsFromSqlite')\r\n              }); \r\n            }\r\n           });\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    prompt.present();\r\n  }\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/contact/contact-group-manage/contact-group-manage.ts"],"sourceRoot":""}