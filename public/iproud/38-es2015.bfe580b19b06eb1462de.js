(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{TDSW:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("mrSG"),s=n("hAUF"),l=n("ZOGp"),r=n("YsCg"),a=n("93YN");class o{constructor(t,e,n,i,s,l){this.modalCtrl=t,this.authProvider=e,this.navCtrl=n,this.router=i,this.translateService=s,this.nativeService=l}doSelectCountry(){return new Promise((t,e)=>i.b(this,void 0,void 0,(function*(){const n=yield this.modalCtrl.create({component:a.a,componentProps:{isNeedAll:!0}});n.onDidDismiss().then(e=>{t(e.data)}).catch(t=>{e(t)}),yield n.present()})))}SendSecurityCode(t){return new Promise((e,n)=>i.b(this,void 0,void 0,(function*(){this.authProvider.SendSecurityCode2(t).subscribe(t=>{e("")},t=>{e(t)})})))}LoginByWFAccount(t){return new Promise((e,n)=>i.b(this,void 0,void 0,(function*(){this.authProvider.LoginByWFAccount2(t).subscribe(t=>{this.setTabsToRoot()},t=>{e(t)})})))}Login(t){return new Promise((e,n)=>i.b(this,void 0,void 0,(function*(){this.authProvider.Login2(t).subscribe(t=>{this.setTabsToRoot()},t=>{e(t)})})))}login(t,e,n,s){return new Promise((n,s)=>i.b(this,void 0,void 0,(function*(){switch(t){case r.j.SendSecurityCodeBefore:this.authProvider.SendSecurityCode2(e).subscribe(t=>{n("")},t=>{n(t)});break;case r.j.LoginByWFAccountBefore:this.authProvider.LoginByWFAccount2(e).subscribe(t=>{this.setTabsToRoot()},t=>{n(t)});break;case r.j.LoginByMobileBefore:this.authProvider.Login2(e).subscribe(t=>{this.setTabsToRoot()},t=>{n(t)})}})))}setTabsToRoot(){this.router.navigate([s.b.HomePage],{replaceUrl:!0})}verificationErrorHandle(t,e){return t.errcode===l.a.USER.INCORRECT_VERIFICATION_CODE?this.translateService.instant("VERIFICATION_CODE_INCORRECT")+";"+Date.now():t.errcode===l.a.USER.VERIFICATION_CODE_EXPIRED?this.translateService.instant("VERIFICATION_CODE_EXPIRED")+";"+Date.now():void this.loginError(t)}loginError(t){let e="";switch(t.errcode){case l.a.USER.INACTIVE_USER:e="ACCOUNT_LOCKED";break;case l.a.USER.USER_NOT_EXIST:e="LOGIN_ERROR_USER_NOT_EXIST";break;case l.a.USER.MOBILE_NOT_EXIST:e="LOGIN_ERROR_PHONE_NUMBER_NOT_EXIST";break;case l.a.USER.INCORRECT_ACCOUNT_AND_PASSWORD:case l.a.USER.INCORRECT_PASSWORD:e="LOGIN_ERROR_INCORRECT_PASSWORD";break;default:e="LOGIN_ERROR"}this.nativeService.alert(t.errcode+","+this.translateService.instant(e))}}},mGGX:function(t,e,n){"use strict";var i=n("TDSW");n("mrSG"),n("wqKC"),n("93YN");class s{constructor(t,e){this.session=t,this.nativeService=e}ionViewWillEnter(){this.session.isDarkMode||this.nativeService.setStyleLightContent()}ionViewWillLeave(){this.nativeService.statusBarStyle(this.session.isDarkMode)}}n.d(e,"i",(function(){return r})),n.d(e,"a",(function(){return a})),n.d(e,"e",(function(){return o})),n.d(e,"b",(function(){return u})),n.d(e,"f",(function(){return h})),n.d(e,"h",(function(){return d})),n.d(e,"g",(function(){return b})),n.d(e,"c",(function(){return C})),n.d(e,"d",(function(){return E}));const l=t=>{let e={};const n=t.getCurrentNavigation().extras;return n&&n.state&&(e=n.state),e},r=(t,e)=>{let n=t||e.previousUrl;return e&&(n=e.previousUrl),n};class a{constructor(t){this.events=t}scrollWidth(t,e){return{width:t||window.screen.availWidth-5+"px",height:(e||44)+"px"}}completeRefresh(t){t&&t.target.complete()}completedoInfinite(t){t&&t.target.complete()}}class o{constructor(t,e){this.paramUrl=t,this.session=e,this.defaultUrl="",this.defaultUrl=r(t,this.session)}}class u{constructor(t){this.router=t,this.params=l(t)}}class c extends a{constructor(t,e){super(e),this.router=t,this.events=e,this.params=l(t)}}class h extends a{constructor(t,e,n){super(e),this.paramUrl=t,this.events=e,this.session=n,this.defaultUrl="",this.defaultUrl=r(t,n)}}class d extends o{constructor(t,e,n){super(e,n),this.router=t,this.paramUrl=e,this.session=n,this.defaultUrl="",this.params=l(t)}}class b extends c{constructor(t,e,n,i){super(t,n),this.router=t,this.paramUrl=e,this.events=n,this.session=i,this.defaultUrl="",this.defaultUrl=r(e,this.session)}}class v extends s{constructor(t,e,n){super(e,n),this.router=t,this.session=e,this.nativeService=n,this.params=l(t)}}class C extends v{constructor(t,e,n,i){super(t,e,n),this.router=t,this.session=e,this.nativeService=n,this.paramUrl=i,this.defaultUrl=r(i,e)}}class S extends i.a{constructor(t,e,n,i,s,r){super(e,n,i,t,s,r),this.router=t,this.modalCtrl=e,this.authProvider=n,this.navCtrl=i,this.translateService=s,this.nativeService=r,this.params=l(t)}}class E extends S{constructor(t,e,n,i,s,a,o,u){super(t,e,n,i,s,a),this.router=t,this.modalCtrl=e,this.authProvider=n,this.navCtrl=i,this.translateService=s,this.nativeService=a,this.paramUrl=o,this.session=u,this.params=l(t),this.defaultUrl=r(o,u)}}},oMdR:function(t,e,n){"use strict";n.r(e);var i=n("8Y7J");class s{}var l=n("pMnS"),r=n("oBZk"),a=n("ZZ/e"),o=n("TSSN"),u=n("SVse"),c=n("mrSG"),h=n("bl9C"),d=n("riPR"),b=n("m6VD"),v=n("n90K"),C=n("/nCp"),S=n("GAO8"),E=(n("o0su"),n("hAUF")),f=n("U7T7"),I=n("mGGX");class m extends I.e{constructor(t,e,n,i,s,l,r,a,o,u,c,d,b){super(E.b.MyPage,e),this.navCtrl=t,this.session=e,this.modalCtrl=n,this.userProvider=i,this.authProvider=s,this.nativeService=l,this.translate=r,this.router=a,this.alert=o,this.storageService=u,this.eventsService=c,this.sqliteProvider=d,this.cdf=b,this.isBindWeChat=!1,this.isBindedAppleID=!1,this.isIOS13=!1,this.enableElectronicSign=h.q,this.isIOS13=this.nativeService.isIOS13()}ngOnInit(){this.validVariable(),this.eventsService.on(f.y.InfoChanged,()=>{null!=this.session.user&&(this.currentUser=this.session.user,this.detectChanges())})}validVariable(){null!=this.session.user&&(this.currentUser=this.session.user,this.isBindedAppleID=this.currentUser.isBindedAppleId,this.isBindWeChat=this.currentUser.isBindedWX,console.log("isBindWeChat:",this.isBindWeChat,"isBindedAppleID:",this.isBindedAppleID),this.detectChanges())}detectChanges(){this.cdf.destroyed||this.cdf.detectChanges()}BindWeChat(){return c.b(this,void 0,void 0,(function*(){const t=yield this.authProvider.getWeChatCode();this.userProvider.BindWechat(t).subscribe(t=>{this.currentUser.nickNameWX=t.result.nickName,this.currentUser.headImgUrlWX=t.result.headImgUrl,this.isBindWeChat=!0,this.detectChanges(),this.nativeService.showToast(this.translate.instant("BINDING_SUCCESS"))},t=>{console.error(t)})}))}BeforeUnbindWechat(){return c.b(this,void 0,void 0,(function*(){const t=yield this.alert.create({header:this.translate.instant("UNBIND_BEFROE_HEADER"),subHeader:"",message:this.translate.instant("UNBIND_WECHAT_BEFROE_MESSAGE"),buttons:[{text:this.translate.instant("MESSAGE_DELETE_CANCEL"),role:"cancel"},{text:this.translate.instant("MESSAGE_DELETE_CONFIRM"),handler:()=>{this.userProvider.UnBindWechat().subscribe(t=>{this.isBindWeChat=!1,this.detectChanges(),this.nativeService.showToast(this.translate.instant("UNBIND_SUCCESS"))},t=>{console.error(t)})}}]});yield t.present()}))}UnBindAppleID(){return c.b(this,void 0,void 0,(function*(){const t=yield this.alert.create({header:this.translate.instant("UNBIND_BEFROE_HEADER"),subHeader:"",message:this.translate.instant("UNBIND_APPLE_BEFROE_MESSAGE"),buttons:[{text:this.translate.instant("MESSAGE_DELETE_CANCEL"),role:"cancel"},{text:this.translate.instant("MESSAGE_DELETE_CONFIRM"),handler:()=>{this.userProvider.UnBindAppleId().subscribe(t=>{this.isBindedAppleID=!1,this.detectChanges(),this.nativeService.showToast(this.translate.instant("UNBIND_SUCCESS"))},t=>{this.nativeService.alert(JSON.stringify(t))})}}]});yield t.present()}))}BindAppleID(){this.nativeService.isMobile()?this.nativeService.signInWithApple().then(t=>c.b(this,void 0,void 0,(function*(){this.userProvider.BindAppleId(t).subscribe(t=>{this.isBindedAppleID=!0,this.detectChanges(),this.nativeService.showToast(this.translate.instant("BINDING_SUCCESS"))},t=>{this.nativeService.alert(JSON.stringify(t))},()=>{})}))):this.userProvider.BindAppleId({email:"894306909@qq.com",authorizationCode:"c98f75e4f909449fea92d8ae51009703d.0.nsqsv.ZbOZb5gFZnNNqEy9yoM5yw",state:"",identityToken:"eyJraWQiOiI4NkQ4OEtmIiwiYWxnIjoiUlMyNTYifQ.eyJpc3MiOiJodHRwczovL2FwcGxlaWQuYXBwbGUuY29tIiwiYXVkIjoiY29tLmZpaG1iLmlwcm91ZCIsImV4cCI6MTU4NzM2NjQwNywiaWF0IjoxNTg3MzY1ODA3LCJzdWIiOiIwMDIwMjUuZGUxNmNiNjM4ZTZhNDg5NThmODYwYTIyNTM4NmY2YjUuMDU1MiIsImNfaGFzaCI6ImdENnp3ZnZrdWFJU01HX1ZTNFRwYUEiLCJlbWFpbCI6Ijg5NDMwNjkwOUBxcS5jb20iLCJlbWFpbF92ZXJpZmllZCI6InRydWUiLCJhdXRoX3RpbWUiOjE1ODczNjU4MDcsIm5vbmNlX3N1cHBvcnRlZCI6dHJ1ZX0.Nf_3mloGL5AfkEhsEUM6cOHmp0qEa5taCrcbehqoXJjB5xNsGP1ukGOvBbVWJF8JHHgRIXxE4r9bPBCURtOcJ3KbMYhWw3PhonnrsTnLd7VtuWZ__wWqkMDLRS603PKVRBt0rg7-DsLhJ8m2DGe9bUeHK1-X2G5UCwDju1WJEjARwIdZbqMzyglY6ePa90zaXin88ROVXIhOThNPVSHlWX25YO8lgMkKwgSoagmnb3V7JVQF8moR6xHn7RNhRaMgaWmXwYcxKJOc7rtQnJbZwn11ODqPtpIxRgpfBGDNb-RhSNbwTYebQ1AyhRfv73YvDmpjSIV3cZAIEg6ykDZZsA",fullName:{nickname:"",phoneticRepresentation:{},middleName:"",familyName:"Chiu",namePrefix:"",givenName:"Benjamin",nameSuffix:""},user:"002025.de16cb638e6a48958f860a225386f6b5.0552"}).subscribe(t=>{this.isBindedAppleID=!0,this.nativeService.showToast(this.translate.instant("BINDING_SUCCESS"))},t=>{this.nativeService.alert(JSON.stringify(t))},()=>{setTimeout(()=>{this.validVariable()},300)})}goChangePassword(){this.router.navigate([E.a.ChangePasswordPage])}goSetPassword(){this.router.navigate([E.a.SetPasswordPage])}goCerificiate(){this.router.navigate([E.a.CertificatePage])}AccountCancellation(){return c.b(this,void 0,void 0,(function*(){const t=yield this.alert.create({header:this.translate.instant("CANCELACCOUNT"),subHeader:"",message:this.translate.instant("CANCELACCOUNT_TIPS"),buttons:[{text:this.translate.instant("MESSAGE_DELETE_CANCEL"),role:"cancel"},{text:this.translate.instant("MESSAGE_DELETE_CONFIRM"),handler:()=>{this.userProvider.CancelAccount().subscribe(t=>{this.storageService.removeItem(h.E.ACCOUNT.TOKEN),this.storageService.removeItem(h.E.ACCOUNT.HOMEDATA),this.session.token=null,this.session.userId=null,this.session.user=null,this.session.refreshToken=null,this.session.homedata=null,this.session.unionId=null,this.eventsService.emit(f.y.ReLogin,Date.now()),this.sqliteProvider.closeUserDataBase(),this.nativeService.showToast(this.translate.instant("CANCELACCOUNT_SUCCESS"))})}}]});yield t.present()}))}}var g=n("ZwiA"),N=n("6m4Z"),p=n("iInd"),U=i.pb({encapsulation:0,styles:[["img[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;vertical-align:middle}.mywechat[_ngcontent-%COMP%]{float:right}ion-text[_ngcontent-%COMP%]{font-size:1.5rem}ion-note[_ngcontent-%COMP%]{--color:var(--text-secondary-color)}"]],data:{}});function O(t){return i.Lb(0,[(t()(),i.rb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function R(t){return i.Lb(0,[(t()(),i.rb(0,0,null,null,5,"ion-item",[["button","true"],["class","ion-align-items-center"],["detail",""]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.goSetPassword()&&i),i}),r.Fb,r.y)),i.qb(1,49152,null,0,a.J,[i.h,i.k,i.x],{button:[0,"button"],detail:[1,"detail"]},null),(t()(),i.rb(2,0,null,0,3,"ion-label",[],null,null,null,r.Gb,r.C)),i.qb(3,49152,null,0,a.P,[i.h,i.k,i.x],null,null),(t()(),i.Jb(4,0,[" "," "])),i.Eb(131072,o.j,[o.k,i.h])],(function(t,e){t(e,1,0,"true","")}),(function(t,e){t(e,4,0,i.Kb(e,4,0,i.Db(e,5).transform("MY_INFO_SET_PASSWORD")))}))}function B(t){return i.Lb(0,[(t()(),i.rb(0,0,null,null,5,"ion-item",[["button","true"],["class","ion-align-items-center"],["detail",""]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.goChangePassword()&&i),i}),r.Fb,r.y)),i.qb(1,49152,null,0,a.J,[i.h,i.k,i.x],{button:[0,"button"],detail:[1,"detail"]},null),(t()(),i.rb(2,0,null,0,3,"ion-label",[],null,null,null,r.Gb,r.C)),i.qb(3,49152,null,0,a.P,[i.h,i.k,i.x],null,null),(t()(),i.Jb(4,0,[" "," "])),i.Eb(131072,o.j,[o.k,i.h])],(function(t,e){t(e,1,0,"true","")}),(function(t,e){t(e,4,0,i.Kb(e,4,0,i.Db(e,5).transform("MY_INFO_CHANGE_PASSWORD")))}))}function D(t){return i.Lb(0,[(t()(),i.gb(16777216,null,null,1,null,B)),i.qb(1,16384,null,0,u.j,[i.M,i.J],{ngIf:[0,"ngIf"]},null),(t()(),i.gb(0,null,null,0))],(function(t,e){var n=e.component;t(e,1,0,null==n.currentUser?null:n.currentUser.hasPassword)}),null)}function T(t){return i.Lb(0,[(t()(),i.rb(0,0,null,null,12,"ion-header",[],null,null,null,r.wb,r.s)),i.qb(1,49152,null,0,a.D,[i.h,i.k,i.x],null,null),(t()(),i.rb(2,0,null,0,10,"ion-toolbar",[],null,null,null,r.hc,r.db)),i.qb(3,49152,null,0,a.Eb,[i.h,i.k,i.x],null,null),(t()(),i.rb(4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,r.jb,r.f)),i.qb(5,49152,null,0,a.n,[i.h,i.k,i.x],null,null),(t()(),i.rb(6,0,null,0,2,"ion-back-button",[["text",""]],null,[[null,"click"]],(function(t,e,n){var s=!0;return"click"===e&&(s=!1!==i.Db(t,8).onClick(n)&&s),s}),r.gb,r.c)),i.qb(7,49152,null,0,a.i,[i.h,i.k,i.x],{defaultHref:[0,"defaultHref"],text:[1,"text"]},null),i.qb(8,16384,null,0,a.j,[[2,a.kb],a.Lb],{defaultHref:[0,"defaultHref"]},null),(t()(),i.rb(9,0,null,0,3,"ion-title",[],null,null,null,r.fc,r.bb)),i.qb(10,49152,null,0,a.Cb,[i.h,i.k,i.x],null,null),(t()(),i.Jb(11,0,["",""])),i.Eb(131072,o.j,[o.k,i.h]),(t()(),i.rb(13,0,null,null,19,"ion-content",[],null,null,null,r.rb,r.n)),i.qb(14,49152,null,0,a.w,[i.h,i.k,i.x],null,null),(t()(),i.rb(15,0,null,0,4,"div",[["class","ion-text-left ion-margin"],["color","medium"]],null,null,null,null,null)),(t()(),i.rb(16,0,null,null,3,"ion-text",[],null,null,null,r.cc,r.Y)),i.qb(17,49152,null,0,a.zb,[i.h,i.k,i.x],null,null),(t()(),i.Jb(18,0,["",""])),i.Eb(131072,o.j,[o.k,i.h]),(t()(),i.rb(20,0,null,0,12,"ion-list",[],null,null,null,r.Ib,r.D)),i.qb(21,49152,null,0,a.Q,[i.h,i.k,i.x],null,null),(t()(),i.gb(16777216,null,0,1,null,O)),i.qb(23,16384,null,0,u.j,[i.M,i.J],{ngIf:[0,"ngIf"],ngIfThen:[1,"ngIfThen"],ngIfElse:[2,"ngIfElse"]},null),(t()(),i.gb(0,[["showSetPassword",2]],0,0,null,R)),(t()(),i.gb(0,[["showChangePassword",2]],0,0,null,D)),(t()(),i.rb(26,0,null,0,5,"ion-item",[["button","true"],["class","ion-align-items-center"],["detail",""],["lines","none"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.AccountCancellation()&&i),i}),r.Fb,r.y)),i.qb(27,49152,null,0,a.J,[i.h,i.k,i.x],{button:[0,"button"],detail:[1,"detail"],lines:[2,"lines"]},null),(t()(),i.rb(28,0,null,0,3,"ion-label",[],null,null,null,r.Gb,r.C)),i.qb(29,49152,null,0,a.P,[i.h,i.k,i.x],null,null),(t()(),i.Jb(30,0,["",""])),i.Eb(131072,o.j,[o.k,i.h]),(t()(),i.rb(32,0,null,0,0,"div",[["class","divider"]],null,null,null,null,null))],(function(t,e){var n=e.component;t(e,7,0,n.defaultUrl,""),t(e,8,0,n.defaultUrl),t(e,23,0,null==n.currentUser?null:n.currentUser.hasPassword,i.Db(e,25),i.Db(e,24)),t(e,27,0,"true","","none")}),(function(t,e){t(e,11,0,i.Kb(e,11,0,i.Db(e,12).transform("MY_LIST_SECURITY"))),t(e,18,0,i.Kb(e,18,0,i.Db(e,19).transform("SECURITY_MY_ACCOUNT"))),t(e,30,0,i.Kb(e,30,0,i.Db(e,31).transform("CANCELACCOUNT")))}))}function _(t){return i.Lb(0,[(t()(),i.rb(0,0,null,null,1,"page-security",[],null,null,null,T,U)),i.qb(1,114688,null,0,m,[a.Lb,g.a,a.Kb,S.a,C.a,N.a,o.k,p.m,a.b,v.a,d.a,b.a,i.h],null,null)],(function(t,e){t(e,1,0)}),null)}var A=i.nb("page-security",m,_,{},{},[]),P=n("s7LF");n.d(e,"SecurityPageModuleNgFactory",(function(){return w}));var w=i.ob(s,[],(function(t){return i.Ab([i.Bb(512,i.j,i.Z,[[8,[l.a,A]],[3,i.j],i.v]),i.Bb(4608,u.l,u.k,[i.s,[2,u.A]]),i.Bb(4608,a.c,a.c,[i.x,i.g]),i.Bb(4608,a.Kb,a.Kb,[a.c,i.j,i.p]),i.Bb(4608,a.Ob,a.Ob,[a.c,i.j,i.p]),i.Bb(4608,P.r,P.r,[]),i.Bb(4608,o.g,o.f,[]),i.Bb(4608,o.c,o.e,[]),i.Bb(4608,o.i,o.d,[]),i.Bb(4608,o.b,o.a,[]),i.Bb(4608,o.k,o.k,[o.l,o.g,o.c,o.i,o.b,o.m,o.n]),i.Bb(1073742336,u.b,u.b,[]),i.Bb(1073742336,a.Gb,a.Gb,[]),i.Bb(1073742336,p.n,p.n,[[2,p.t],[2,p.m]]),i.Bb(1073742336,o.h,o.h,[]),i.Bb(1073742336,P.q,P.q,[]),i.Bb(1073742336,P.h,P.h,[]),i.Bb(1073742336,s,s,[]),i.Bb(1024,p.k,(function(){return[[{path:"",component:m}]]}),[]),i.Bb(256,o.n,void 0,[]),i.Bb(256,o.m,void 0,[])])}))}}]);