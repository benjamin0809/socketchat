(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{XRVZ:function(l,n,t){"use strict";t.r(n);var o=t("8Y7J");class e{}var i=t("pMnS"),s=t("oBZk"),u=t("ZZ/e"),r=t("SVse"),a=t("1bmy"),b=t("liwm"),c=t("riPR"),m=t("ZwiA"),p=t("TSSN"),d=t("mrSG"),h=t("VvKu"),g=t("VGsI"),f=t("geQG"),k=t("GAO8"),x=t("RXhJ");class w extends f.a{constructor(l,n,t,o,e,i,s,u){super(l,n,u),this.navCtrl=l,this.eventsService=n,this.session=t,this.workflowProvider=o,this.translate=e,this.popoverCtrl=i,this.userProvider=s,this.router=u,this.page=0,this.count=10,this.isCollapse=!1,this.isDataLoading=!1,this.isDataEmpty=!1}ngOnInit(){this.init(),this.eventsService.on(h.u.SetShowMobileTask,()=>{this.getUndoneTasks()}),this.eventsService.on(h.u.RefreshTodoList,()=>{this.getUndoneTasks()})}getUndoneTasks(l){l||(this.isDataLoading=!0),this.isDataEmpty=!1,this.buttons=[],this.tasklist=[],this.showlist=[],this.buttons.push({appcode:"_iproud_all",modelname:"_all_models",modeldesc:this.translate.instant("WORKFLOW_UNDONETASK_ALL"),appname:this.translate.instant("WORKFLOW_UNDONETASK_ALL"),totalnum:0,isSelected:!0}),this.currentModel=this.buttons[0].modelname;const n=!!this.session.setting&&this.session.setting["showmobileTaskOnly".toUpperCase()];this.workflowProvider.getTodoTask(g.a.boolean(n)).subscribe(l=>{if(l.result){this.tasklist=g.a.boolean(n)?l.result.Tasks.filter(l=>l.supportMobile):l.result.Tasks,this.buttons=this.buttons.concat(l.result.Models);for(const l of this.buttons){l.totalnum=0;for(const n of this.tasklist)l.modelname===n.modelname&&l.totalnum++;l.modeldesc=l.modeldesc||l.modeldesctw}this.buttons[0].totalnum=this.tasklist.length,this.buttons=this.buttons.filter(l=>l.totalnum>0),this.isDataEmpty=!(this.buttons.length>0),this.showlist=this.tasklist}else this.isDataEmpty=!0},l=>{},()=>{console.log("loaded"),this.isDataLoading=!1,super.completeRefresh(l)})}getTasksByModel(l){if(this.currentModel=l.modelname,this.showlist=[],"_iproud_all"===l.appcode)this.showlist=this.tasklist;else for(const n of this.tasklist)n.modelname===l.modelname&&this.showlist.push(n);for(const n of this.buttons)n.isSelected=n.modelname===l.modelname}goDetails(l){l.app_isEdit=l.flag>"0",l.app_needSign=!0,super.goDetails(l)}scrollWidth(){return super.scrollWidth(window.screen.availWidth-25)}doRefresh(l){this.getUndoneTasks(l)}init(){return d.b(this,void 0,void 0,(function*(){this.session.setting?this.getUndoneTasks():(yield this.userProvider.getPrivateSetting()).subscribe(l=>{const n={};for(const t of l.result)n[t.name.toUpperCase()]=t.value;this.session.setting=n,this.getUndoneTasks()},l=>{this.getUndoneTasks()})}))}mock(){for(let l=0;l<20;l++){const n="\u53ef\u80fd\u4f1a\u662f\u591a\u5c11\u4e2a\u6c49\u5b57\u5462\uff0c\u4f60\u731c\u4e00\u4e0b",t={appcode:"_iproud_all"+l,modelname:"_all_models"+l,modeldesctw:n.substr(l),appname:n.substr(l),totalnum:0,isSelected:!1};this.buttons.push(t)}}changeButtonsShow(){this.isCollapse=!this.isCollapse}scrollHeight(){const l=this.taskType.nativeElement?this.taskType.nativeElement.clientHeigh||this.taskType.nativeElement.offsetHeight||this.taskType.nativeElement.scrollHeight:44;return{height:l>200?200:l+"px",marginRight:"3rem"}}}var v=t("iInd"),y=o.pb({encapsulation:0,styles:[[".back-button[_ngcontent-%COMP%]{--color:#999!important}.button-native[_ngcontent-%COMP%]{color:var(--text-primary-color)}ion-avatar[_ngcontent-%COMP%]{width:36px;height:36px;margin:8px 16px 8px 0;float:left}.list-title[_ngcontent-%COMP%]{white-space:normal;font-size:1.4rem;color:var(--text-primary-color)}.taskdesc-box[_ngcontent-%COMP%]{display:-webkit-box;display:flex;position:relative;overflow:inherit}.p[_ngcontent-%COMP%]{font-size:1.4rem;line-height:normal;text-overflow:inherit;color:#8e9093!important;margin:0 0 2px}ion-icon[_ngcontent-%COMP%]{-webkit-filter:var(--text-primary-color);filter:var(--text-primary-color)}.pid[_ngcontent-%COMP%]{font-size:1.1rem;right:0;position:absolute;z-index:2;background:var(--bg-primary-color);padding:0 5px;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.taskdate[_ngcontent-%COMP%]{font-size:1.1rem}.buttons-box[_ngcontent-%COMP%]{display:-webkit-inline-box;display:inline-flex;-webkit-animation:.5s topIn;animation:.5s topIn;padding-right:3.5rem}.task-type[_ngcontent-%COMP%]{max-height:200px;height:100px}.expand[_ngcontent-%COMP%]{-webkit-animation:1s topIn;animation:1s topIn;padding-right:3rem}.collapse[_ngcontent-%COMP%]{width:3rem;height:3rem;display:block;text-align:center;position:absolute;right:0;top:.5rem;z-index:9999}.collapse[_ngcontent-%COMP%]   .icon-ios[_ngcontent-%COMP%]{-webkit-transition:-webkit-transform .2s;transition:-webkit-transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s;font-size:3rem;color:var(--text-primary-color);background:0 0}.collapse[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.badge-ios-gray[_ngcontent-%COMP%]{background:0 0}@-webkit-keyframes icon{0%{-webkit-transform:rotate(180deg);transform:rotate(180deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes icon{0%{-webkit-transform:rotate(180deg);transform:rotate(180deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes topIn{from{-webkit-transform-origin:0 0;transform-origin:0 0;opacity:.5}to{-webkit-transform-origin:0 0;transform-origin:0 0;opacity:1}}@keyframes topIn{from{-webkit-transform-origin:0 0;transform-origin:0 0;opacity:.5}to{-webkit-transform-origin:0 0;transform-origin:0 0;opacity:1}}@-webkit-keyframes content{from{-webkit-transform:translateY(-25px);transform:translateY(-25px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes content{from{-webkit-transform:translateY(-25px);transform:translateY(-25px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}"]],data:{}});function O(l){return o.Lb(0,[(l()(),o.rb(0,0,null,null,5,"ion-button",[["class","type-button"],["size","small"]],null,[[null,"click"]],(function(l,n,t){var o=!0;return"click"===n&&(o=!1!==l.component.getTasksByModel(l.context.$implicit)&&o),o}),s.ib,s.e)),o.qb(1,49152,null,0,u.m,[o.h,o.k,o.x],{color:[0,"color"],size:[1,"size"]},null),(l()(),o.Jb(2,0,[""," "])),(l()(),o.rb(3,0,null,0,2,"ion-badge",[["class","badge-ios-gray"],["slot","end"]],null,null,null,s.hb,s.d)),o.qb(4,49152,null,0,u.l,[o.h,o.k,o.x],{color:[0,"color"]},null),(l()(),o.Jb(5,0,["",""]))],(function(l,n){l(n,1,0,n.context.$implicit.isSelected?"primary":"light","small"),l(n,4,0,n.context.$implicit.isSelected?"primary":"light")}),(function(l,n){l(n,2,0,n.context.$implicit.modeldesc),l(n,5,0,n.context.$implicit.totalnum)}))}function q(l){return o.Lb(0,[(l()(),o.rb(0,0,[["scroll",1]],null,5,"div",[["appScrollFocus",""],["scrollX","true"]],null,null,null,null,null)),o.Gb(512,null,r.x,r.y,[o.k,o.r,o.B]),o.qb(2,278528,null,0,r.m,[r.x],{ngStyle:[0,"ngStyle"]},null),(l()(),o.rb(3,0,null,null,2,"div",[["class","buttons-box"]],null,null,null,null,null)),(l()(),o.gb(16777216,null,null,1,null,O)),o.qb(5,278528,null,0,r.i,[o.M,o.J,o.q],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){var t=n.component;l(n,2,0,t.scrollWidth()),l(n,5,0,t.buttons)}),null)}function M(l){return o.Lb(0,[(l()(),o.rb(0,0,null,null,5,"ion-button",[["size","small"]],null,[[null,"click"]],(function(l,n,t){var o=!0;return"click"===n&&(o=!1!==l.component.getTasksByModel(l.context.$implicit)&&o),o}),s.ib,s.e)),o.qb(1,49152,null,0,u.m,[o.h,o.k,o.x],{color:[0,"color"],size:[1,"size"]},null),(l()(),o.Jb(2,0,[""," "])),(l()(),o.rb(3,0,null,0,2,"ion-badge",[["class","badge-ios-gray"],["slot","end"]],null,null,null,s.hb,s.d)),o.qb(4,49152,null,0,u.l,[o.h,o.k,o.x],{color:[0,"color"]},null),(l()(),o.Jb(5,0,["",""]))],(function(l,n){l(n,1,0,n.context.$implicit.isSelected?"primary":"light","small"),l(n,4,0,n.context.$implicit.isSelected?"primary":"light")}),(function(l,n){l(n,2,0,n.context.$implicit.modeldesc),l(n,5,0,n.context.$implicit.totalnum)}))}function _(l){return o.Lb(0,[(l()(),o.rb(0,0,[[2,0],["taskType",1]],null,2,"div",[["class","expand"]],null,null,null,null,null)),(l()(),o.gb(16777216,null,null,1,null,M)),o.qb(2,278528,null,0,r.i,[o.M,o.J,o.q],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,2,0,n.component.buttons)}),null)}function B(l){return o.Lb(0,[(l()(),o.rb(0,0,null,null,11,"ion-toolbar",[],null,null,null,s.hc,s.db)),o.qb(1,49152,null,0,u.Eb,[o.h,o.k,o.x],null,null),(l()(),o.gb(16777216,null,0,1,null,q)),o.qb(3,16384,null,0,r.j,[o.M,o.J],{ngIf:[0,"ngIf"]},null),(l()(),o.gb(16777216,null,0,1,null,_)),o.qb(5,16384,null,0,r.j,[o.M,o.J],{ngIf:[0,"ngIf"]},null),(l()(),o.rb(6,0,null,0,5,"div",[["class","collapse"]],null,[[null,"click"]],(function(l,n,t){var o=!0;return"click"===n&&(o=!1!==l.component.changeButtonsShow()&&o),o}),null,null)),(l()(),o.rb(7,0,null,null,4,"ion-icon",[["class","icon-ios"],["name","ios-arrow-dropdown"]],null,null,null,s.xb,s.t)),o.Gb(512,null,r.v,r.w,[o.q,o.r,o.k,o.B]),o.qb(9,278528,null,0,r.h,[r.v],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),o.Fb(10,{dropdown:0}),o.qb(11,49152,null,0,u.E,[o.h,o.k,o.x],{name:[0,"name"]},null)],(function(l,n){var t=n.component;l(n,3,0,t.isCollapse),l(n,5,0,!t.isCollapse);var o=l(n,10,0,!t.isCollapse);l(n,9,0,"icon-ios",o),l(n,11,0,"ios-arrow-dropdown")}),null)}function T(l){return o.Lb(0,[(l()(),o.rb(0,0,null,null,2,"nodata",[["class","nodata"]],null,null,null,a.b,a.a)),o.qb(1,114688,null,0,b.a,[c.a,m.a,o.h,p.k],{text:[0,"text"]},null),o.Eb(131072,p.j,[p.k,o.h])],(function(l,n){l(n,1,0,o.vb(1,"",o.Kb(n,1,0,o.Db(n,2).transform("WORKFLOW_UNDONETASK_HINT")),""))}),null)}function C(l){return o.Lb(0,[(l()(),o.rb(0,0,null,null,2,"div",[["class","ion-text-center ion-padding"]],null,null,null,null,null)),(l()(),o.rb(1,0,null,null,1,"ion-spinner",[["name","lines"]],null,null,null,s.Yb,s.U)),o.qb(2,49152,null,0,u.ub,[o.h,o.k,o.x],{name:[0,"name"]},null)],(function(l,n){l(n,2,0,"lines")}),null)}function I(l){return o.Lb(0,[(l()(),o.rb(0,0,null,null,2,"ion-avatar",[["slot","start"]],null,null,null,s.fb,s.b)),o.qb(1,49152,null,0,u.h,[o.h,o.k,o.x],null,null),(l()(),o.rb(2,0,null,0,0,"img",[["src","assets/img/workflow/mobilesupport.png"]],null,null,null,null,null))],null,null)}function S(l){return o.Lb(0,[(l()(),o.rb(0,0,null,null,2,"ion-avatar",[["slot","start"]],null,null,null,s.fb,s.b)),o.qb(1,49152,null,0,u.h,[o.h,o.k,o.x],null,null),(l()(),o.rb(2,0,null,0,0,"img",[["src","assets/img/workflow/mobilenotsupport.png"]],null,null,null,null,null))],null,null)}function L(l){return o.Lb(0,[(l()(),o.rb(0,0,null,null,17,"ion-item",[["detail",""]],null,[[null,"click"]],(function(l,n,t){var o=!0;return"click"===n&&(o=!1!==l.component.goDetails(l.context.$implicit)&&o),o}),s.Fb,s.y)),o.qb(1,49152,null,0,u.J,[o.h,o.k,o.x],{detail:[0,"detail"]},null),(l()(),o.rb(2,0,null,0,15,"ion-label",[],null,null,null,s.Gb,s.C)),o.qb(3,49152,null,0,u.P,[o.h,o.k,o.x],null,null),(l()(),o.gb(16777216,null,0,1,null,I)),o.qb(5,16384,null,0,r.j,[o.M,o.J],{ngIf:[0,"ngIf"]},null),(l()(),o.gb(16777216,null,0,1,null,S)),o.qb(7,16384,null,0,r.j,[o.M,o.J],{ngIf:[0,"ngIf"]},null),(l()(),o.rb(8,0,null,0,1,"h2",[["class","list-title"]],null,null,null,null,null)),(l()(),o.Jb(9,null,[" "," "])),(l()(),o.rb(10,0,null,0,4,"p",[["class","taskdesc-box p"]],null,null,null,null,null)),(l()(),o.rb(11,0,null,null,1,"span",[["class","taskdesc"]],null,null,null,null,null)),(l()(),o.Jb(12,null,["",""])),(l()(),o.rb(13,0,null,null,1,"span",[["class","pid"]],null,null,null,null,null)),(l()(),o.Jb(14,null,["",""])),(l()(),o.rb(15,0,null,0,2,"p",[["class","p"]],null,null,null,null,null)),(l()(),o.rb(16,0,null,null,1,"span",[["class","taskdate"]],null,null,null,null,null)),(l()(),o.Jb(17,null,["","\xa0 \xa0 ",""]))],(function(l,n){l(n,1,0,""),l(n,5,0,n.context.$implicit.supportMobile),l(n,7,0,!n.context.$implicit.supportMobile)}),(function(l,n){l(n,9,0,n.context.$implicit.processname),l(n,12,0,n.context.$implicit.taskdesc),l(n,14,0,n.context.$implicit.pid),l(n,17,0,n.context.$implicit.ownername,n.context.$implicit.datecreated)}))}function J(l){return o.Lb(0,[o.Hb(671088640,1,{content:0}),o.Hb(671088640,2,{taskType:0}),(l()(),o.rb(2,0,null,null,18,"ion-header",[["no-shadow",""]],null,null,null,s.wb,s.s)),o.qb(3,49152,null,0,u.D,[o.h,o.k,o.x],null,null),(l()(),o.rb(4,0,null,0,14,"ion-toolbar",[["class","page-navbar"],["hideBackButton","true"]],null,null,null,s.hc,s.db)),o.qb(5,49152,null,0,u.Eb,[o.h,o.k,o.x],null,null),(l()(),o.rb(6,0,null,0,8,"ion-buttons",[["slot","start"]],null,null,null,s.jb,s.f)),o.qb(7,49152,null,0,u.n,[o.h,o.k,o.x],null,null),(l()(),o.rb(8,0,null,0,6,"ion-back-button",[],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==o.Db(l,10).onClick(t)&&e),e}),s.gb,s.c)),o.qb(9,49152,null,0,u.i,[o.h,o.k,o.x],null,null),o.qb(10,16384,null,0,u.j,[[2,u.kb],u.Lb],null,null),(l()(),o.rb(11,0,null,0,1,"ion-icon",[["ios","ios-arrow-back"],["md","md-arrow-back"]],null,null,null,s.xb,s.t)),o.qb(12,49152,null,0,u.E,[o.h,o.k,o.x],{ios:[0,"ios"],md:[1,"md"]},null),(l()(),o.Jb(13,0,[" "," "])),o.Eb(131072,p.j,[p.k,o.h]),(l()(),o.rb(15,0,null,0,3,"ion-title",[],null,null,null,s.fc,s.bb)),o.qb(16,49152,null,0,u.Cb,[o.h,o.k,o.x],null,null),(l()(),o.Jb(17,0,["",""])),o.Eb(131072,p.j,[p.k,o.h]),(l()(),o.gb(16777216,null,0,1,null,B)),o.qb(20,16384,null,0,r.j,[o.M,o.J],{ngIf:[0,"ngIf"]},null),(l()(),o.rb(21,0,null,null,13,"ion-content",[["class","content-box"]],null,null,null,s.rb,s.n)),o.qb(22,49152,[[1,4]],0,u.w,[o.h,o.k,o.x],null,null),(l()(),o.rb(23,0,null,0,3,"ion-refresher",[["slot","fixed"]],null,[[null,"ionRefresh"]],(function(l,n,t){var o=!0;return"ionRefresh"===n&&(o=!1!==l.component.doRefresh(t)&&o),o}),s.Nb,s.I)),o.qb(24,49152,null,0,u.fb,[o.h,o.k,o.x],null,null),(l()(),o.rb(25,0,null,0,1,"ion-refresher-content",[["pullingIcon","arrow-dropdown"],["refreshingSpinner","circles"]],null,null,null,s.Mb,s.J)),o.qb(26,49152,null,0,u.gb,[o.h,o.k,o.x],{pullingIcon:[0,"pullingIcon"],refreshingSpinner:[1,"refreshingSpinner"]},null),(l()(),o.gb(16777216,null,0,1,null,T)),o.qb(28,16384,null,0,r.j,[o.M,o.J],{ngIf:[0,"ngIf"]},null),(l()(),o.gb(16777216,null,0,1,null,C)),o.qb(30,16384,null,0,r.j,[o.M,o.J],{ngIf:[0,"ngIf"]},null),(l()(),o.rb(31,0,null,0,3,"ion-list",[],null,null,null,s.Ib,s.D)),o.qb(32,49152,null,0,u.Q,[o.h,o.k,o.x],null,null),(l()(),o.gb(16777216,null,0,1,null,L)),o.qb(34,278528,null,0,r.i,[o.M,o.J,o.q],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){var t=n.component;l(n,12,0,"ios-arrow-back","md-arrow-back"),l(n,20,0,t.buttons&&t.buttons.length>1),l(n,26,0,"arrow-dropdown","circles"),l(n,28,0,t.isDataEmpty),l(n,30,0,t.isDataLoading),l(n,34,0,t.showlist)}),(function(l,n){l(n,13,0,o.Kb(n,13,0,o.Db(n,14).transform("HOME_TITLE"))),l(n,17,0,o.Kb(n,17,0,o.Db(n,18).transform("WORKFLOW_UNDONETASK_TITLE")))}))}function P(l){return o.Lb(0,[(l()(),o.rb(0,0,null,null,1,"page-undonetask",[],null,null,null,J,y)),o.qb(1,114688,null,0,w,[u.Lb,c.a,m.a,x.a,p.k,u.Ob,k.a,v.m],null,null)],(function(l,n){l(n,1,0)}),null)}var E=o.nb("page-undonetask",w,P,{},{},[]),D=t("s7LF"),$=t("j1ZV");t.d(n,"UndonetaskPageModuleNgFactory",(function(){return j}));var j=o.ob(e,[],(function(l){return o.Ab([o.Bb(512,o.j,o.Z,[[8,[i.a,E]],[3,o.j],o.v]),o.Bb(4608,r.l,r.k,[o.s,[2,r.A]]),o.Bb(4608,u.c,u.c,[o.x,o.g]),o.Bb(4608,u.Kb,u.Kb,[u.c,o.j,o.p]),o.Bb(4608,u.Ob,u.Ob,[u.c,o.j,o.p]),o.Bb(4608,D.r,D.r,[]),o.Bb(4608,D.d,D.d,[]),o.Bb(4608,p.g,p.f,[]),o.Bb(4608,p.c,p.e,[]),o.Bb(4608,p.i,p.d,[]),o.Bb(4608,p.b,p.a,[]),o.Bb(4608,p.k,p.k,[p.l,p.g,p.c,p.i,p.b,p.m,p.n]),o.Bb(5120,o.d,(function(l,n,t){return[u.Ub(l,n,t)]}),[u.Tb,r.c,o.x]),o.Bb(1073742336,v.n,v.n,[[2,v.t],[2,v.m]]),o.Bb(1073742336,p.h,p.h,[]),o.Bb(1073742336,r.b,r.b,[]),o.Bb(1073742336,u.Gb,u.Gb,[]),o.Bb(1073742336,D.q,D.q,[]),o.Bb(1073742336,D.h,D.h,[]),o.Bb(1073742336,D.o,D.o,[]),o.Bb(1073742336,$.a,$.a,[]),o.Bb(1073742336,e,e,[]),o.Bb(256,p.n,void 0,[]),o.Bb(256,p.m,void 0,[]),o.Bb(256,u.Tb,void 0,[]),o.Bb(1024,v.k,(function(){return[[{path:"",component:w}]]}),[])])}))}}]);